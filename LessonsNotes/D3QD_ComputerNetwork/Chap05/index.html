
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="时清川">
      
      
        <link rel="canonical" href="https://sqc-cyh.github.io/LessonsNotes/D3QD_ComputerNetwork/Chap05/">
      
      
        <link rel="prev" href="../Chap04/">
      
      
        <link rel="next" href="../Chap06/">
      
      
      <link rel="icon" href="../../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Chap 5 | 网络层 - 时清川的个人主页</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="https://cdn.tonycrane.cc/jbmono/jetbrainsmono.css">
    
      <link rel="stylesheet" href="https://cdn.tonycrane.cc/lxgw/lxgwscreen.css">
    
      <link rel="stylesheet" href="https://fonts.loli.net/css2?family=Noto+Serif+SC&display=swap">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="index_light" data-md-color-primary="indigo" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="时清川的个人主页" class="md-header__button md-logo" aria-label="时清川的个人主页" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            时清川的个人主页
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chap 5 | 网络层
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="index_light" data-md-color-primary="indigo" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="index_night" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sqc-cyh" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sqc-cyh.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
    
  
  家

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  课程笔记

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../home/home.md" class="md-tabs__link">
          
  
    
  
  科研相关

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../SkillTree/" class="md-tabs__link">
          
  
    
  
  技能树

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Poems/" class="md-tabs__link">
          
  
    
  
  诗

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Friends/" class="md-tabs__link">
          
  
    
  
  友链

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="时清川的个人主页" class="md-nav__button md-logo" aria-label="时清川的个人主页" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    时清川的个人主页
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sqc-cyh" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sqc-cyh.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    家
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            家
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    课程笔记
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            课程笔记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../D2CX_DatabaseSystem/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⭐数据库系统
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            ⭐数据库系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 2 | Relational Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 3 | SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 4 | Advanced SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 5 | Entity-Relationship Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 6 | Relational Database Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap07/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 7 | Storage and File Structure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap08/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 8 | Indexing and Hashing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap09/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 9 | Query Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 10 | Query Optimization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 11 | Transactions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 12 | Concurrency Control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_DatabaseSystem/Chap13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 13 | Recovery System
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../D2CX_AdvancedDataStructure/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⭐高级数据结构与算法分析
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            ⭐高级数据结构与算法分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 1 | “AVL Trees, Splay Trees,and Amortized Analysis”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 2 | “Red-Black Trees and B+ Trees”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 3 | “Inverted File Index”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 4 | “Leftist Heaps and Skew Heaps”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 5 | “Binomial Queue”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 6 | “Backtracking”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap07/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 7 | “Divide and Conquer”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap08/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 8 | “Dynamic Programming”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap09/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 9 | “Greedy Algorithms”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 10 | “NP-Completeness”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 11 | “Approximation”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 12 | “Local Search”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 13 | “Randomized Algorithms”
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_AdvancedDataStructure/Chap14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 14 | “Parallel Algorithms”
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ⭐信息安全原理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            ⭐信息安全原理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D2CX_Xinanyuan/note/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Note
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../DXQ_DeepLearning/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⭐深度学习
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            ⭐深度学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DXQ_DeepLearning/note/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Note
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../D3QD_OperatingSystem/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⭐操作系统
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            ⭐操作系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 1 | Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 2 | Operating-System Structures
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 3 | Processes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 4 | Threads
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 5 | CPU Scheduling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 6 | Process Synchronization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap07/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 7 | Deadlocks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap08/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 8 | Main Memory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap09/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 9 | Virtual Memory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 10 | File-System Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 11 | File System Implementation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 12 | Mass-Storage Systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3QD_OperatingSystem/Chap13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 13 | I/O Systems
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⭐计算机网络
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            ⭐计算机网络
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chap01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 1 | Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chap02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 2 | 物理层
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chap03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 3 | 数据链路层
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chap04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 4 | 介质访问子层
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Chap 5 | 网络层
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Chap 5 | 网络层
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1.网络层服务
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.网络层服务">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 网络层服务概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-tcpip" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 无连接服务的实现（TCP/IP体系）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-osi" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 面向连接服务的实现（OSI参考模型）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14" class="md-nav__link">
    <span class="md-ellipsis">
      1.4 虚电路与数据报网络的比较
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.4 虚电路与数据报网络的比较">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      性能角度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      效率角度
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2internet" class="md-nav__link">
    <span class="md-ellipsis">
      2.Internet网际协议
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.Internet网际协议">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-ipv4" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 IPv4协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-ip" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 IP地址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-dhcp" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 DHCP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-arp" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 ARP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-nat" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 NAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-internet" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 Internet控制报文协议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3.路由算法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.路由算法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 优化原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 最短路径算法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 距离向量路由
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 链路状态路由
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      距离向量和链路状态算法比较：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    <span class="md-ellipsis">
      3.5 层次路由
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36" class="md-nav__link">
    <span class="md-ellipsis">
      3.6 广播路由（可选）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37" class="md-nav__link">
    <span class="md-ellipsis">
      3.7 组播路由
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#38" class="md-nav__link">
    <span class="md-ellipsis">
      3.8 选播路由（可选）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4internet" class="md-nav__link">
    <span class="md-ellipsis">
      4.Internet路由协议
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.Internet路由协议">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-opsf-" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 OPSF-内部网关路由协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-rip-" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 RIP-内部网关路由协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-bgp-" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 BGP-外部网关路由协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-mpls" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 标签交换和MPLS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5. 路由器工作原理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 路由器工作原理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 路由器概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 路由器控制层
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 路由器数据层
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 路由器交换结构
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6. 拥塞控制（重点在下一章中）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      7. 服务质量（应该不是重点）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-vpn" class="md-nav__link">
    <span class="md-ellipsis">
      8. 三层交换与VPN
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      9.IPv6技术
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9.IPv6技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      9.1 IPv6头部结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      9.2 IPv6扩展头
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#93-ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      9.3 IPv6地址配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#94-ipv4ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      9.4 IPv4/IPv6过渡技术
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chap06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 6 | 传输层
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chap07/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 7 | 应用层
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chap08/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 8 | 网络安全
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../D3Q_IoT/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⭐物联网技术基础与应用开发
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            ⭐物联网技术基础与应用开发
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3Q_IoT/Chap01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 1 | Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3Q_IoT/Chap02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 2 | 物联网硬件平台
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3Q_IoT/Chap03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 3 | 物联网操作系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3Q_IoT/Chap04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 4 | 低功耗短距离通信协议
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3Q_IoT/Chap05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 5 | 低功耗广域网
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3Q_IoT/Chap06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 6 | 物联网云平台
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../D3Q_BlockchainAndDigitalCurrency/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⭐区块链与数字货币
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            ⭐区块链与数字货币
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../D3Q_BlockchainAndDigitalCurrency/note/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Note
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    科研相关
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            科研相关
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../home/home.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    好玩2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../SkillTree/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    技能树
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            技能树
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../SkillTree/MakeYourOwnWeb/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⭐如何搭建一个个人网页
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            ⭐如何搭建一个个人网页
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../SkillTree/MachineLearning/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⭐机器学习
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            ⭐机器学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SkillTree/MachineLearning/Chap01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 01 | 启示录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SkillTree/MachineLearning/Chap02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chap 02 | 监督学习
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Poems/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    诗
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            诗
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Poems/%E9%A3%8E%E5%90%B9%E7%9A%84%E5%A4%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    风吹的夜
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Friends/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    友链
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            友链
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1.网络层服务
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.网络层服务">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 网络层服务概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-tcpip" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 无连接服务的实现（TCP/IP体系）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-osi" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 面向连接服务的实现（OSI参考模型）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14" class="md-nav__link">
    <span class="md-ellipsis">
      1.4 虚电路与数据报网络的比较
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.4 虚电路与数据报网络的比较">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      性能角度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      效率角度
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2internet" class="md-nav__link">
    <span class="md-ellipsis">
      2.Internet网际协议
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.Internet网际协议">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-ipv4" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 IPv4协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-ip" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 IP地址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-dhcp" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 DHCP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-arp" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 ARP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-nat" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 NAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-internet" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 Internet控制报文协议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3.路由算法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.路由算法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 优化原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 最短路径算法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 距离向量路由
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 链路状态路由
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      距离向量和链路状态算法比较：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    <span class="md-ellipsis">
      3.5 层次路由
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36" class="md-nav__link">
    <span class="md-ellipsis">
      3.6 广播路由（可选）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37" class="md-nav__link">
    <span class="md-ellipsis">
      3.7 组播路由
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#38" class="md-nav__link">
    <span class="md-ellipsis">
      3.8 选播路由（可选）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4internet" class="md-nav__link">
    <span class="md-ellipsis">
      4.Internet路由协议
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.Internet路由协议">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-opsf-" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 OPSF-内部网关路由协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-rip-" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 RIP-内部网关路由协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-bgp-" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 BGP-外部网关路由协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-mpls" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 标签交换和MPLS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5. 路由器工作原理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 路由器工作原理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 路由器概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 路由器控制层
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 路由器数据层
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 路由器交换结构
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6. 拥塞控制（重点在下一章中）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      7. 服务质量（应该不是重点）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-vpn" class="md-nav__link">
    <span class="md-ellipsis">
      8. 三层交换与VPN
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      9.IPv6技术
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9.IPv6技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      9.1 IPv6头部结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      9.2 IPv6扩展头
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#93-ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      9.3 IPv6地址配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#94-ipv4ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      9.4 IPv4/IPv6过渡技术
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 9265 个字 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 45 张图片 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 46 分钟</p>
</div>
<h1 id="欢迎">Chap 5 | 网络层</h1>
<div class="admonition note">
<p class="admonition-title">章节启示录</p>
<p><!-- === "Tab 1" -->
    <!-- Markdown **content**. -->
<!-- === "Tab 2"
    More Markdown **content**. -->
本章节是计算机网络的第五章。有些内容可能不重要，后续应该会标注。</p>
</div>
<h2 id="1">1.网络层服务<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="11">1.1 网络层服务概述<a class="headerlink" href="#11" title="Permanent link">&para;</a></h3>
<p>网络层提供主机到主机的通信服务，主要任务是将分组从源主机经过多个网络和多段链路传输到目的主机。</p>
<ul>
<li>发送端：将传输层数据单元封装在数据包中</li>
<li>接收端：解析接收的数据包中，取出传输层数据单元，交付给传输层</li>
<li>
<p>路由器：检查数据包首部，转发数据包</p>
</li>
<li>
<p>网络层关键功能：</p>
<ol>
<li>路由（控制面）<ol>
<li>选择数据报从源端到目的端的路径</li>
<li>核心：路由算法与协议</li>
</ol>
</li>
<li>转发（数据面）<ol>
<li>将数据报从路由器的输入接口传送到正确的输出接口</li>
</ol>
</li>
</ol>
</li>
</ul>
<h3 id="12-tcpip">1.2 无连接服务的实现（TCP/IP体系）<a class="headerlink" href="#12-tcpip" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>数据报：无连接的方法。网络在发送分组前不需要先建立连接。</p>
</li>
<li>
<p>数据报服务</p>
<ol>
<li>网络层向上只提供简单灵活<font color = "red">无连接的、尽最大努力交付</font>的数据报服务</li>
<li>发送分组时不需要先建立连接，每个分组独立发送</li>
<li>数据报独立转发，相同源-目的的数据报可能经过不同的路径</li>
<li>网络层不提供服务质量的承诺</li>
</ol>
</li>
<li>尽力而为交付<ol>
<li>传输网络不提供端到端的可靠传输服务：丢包、乱序、错误</li>
<li>优点：网络的造价大大降低，运行方式灵活，能够适应多种应用</li>
</ol>
</li>
</ul>
<p><img alt="" src="../img/114.png" width="400" /></p>
<ul>
<li>服务过程：<ol>
<li>主机A先将分组逐个发往与它直接相连的交换结点A，交换结点A缓存收到的分组 </li>
<li>然后查找自己的转发表。因为不同时刻的网络状态不同，所以转发表的内容可能不完全相同，所以有的分组转发给交换节点C，有的分组转发给交换结点D。</li>
<li>网络中的其他结点收到分组后，类似地转发分组，直到分组最终到达主机B。   </li>
</ol>
</li>
</ul>
<p><img alt="" src="../img/117.png" width="450" /></p>
<h3 id="13-osi">1.3 面向连接服务的实现（OSI参考模型）<a class="headerlink" href="#13-osi" title="Permanent link">&para;</a></h3>
<ul>
<li>虚电路：逻辑上的连接，分组都沿着这条逻辑连接按照存储转发方式传送，而并不是真正建立了一条物理连接。    </li>
</ul>
<p><img alt="" src="../img/115.png" width="400" /></p>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>面向连接的方法也不一定能完全保证数据的可靠传输，链路中的任何一个组成环节仍有可能失效，而这种失效是严重的，可能导致所有数据丢失。</p>
</div>
<ul>
<li>服务过程：每次建立虚电路时，将一个未用过的虚电路号（VCID）分配给该虚电路，以区别于本系统中其他的虚电路<ol>
<li>数据传输前：主机A和主机B建立连接，主机A发出“呼叫请求”分组，该分组通过中间结点送往主机B，若主机B统一连接，则发送“呼叫应答”分组予以确认。</li>
<li>虚电路建立后：AB可以相互发送数据分组</li>
<li>传送结束后：主机A通过发送“释放请求”分组来拆除虚电路，逐段断开整个连接   </li>
</ol>
</li>
</ul>
<p><img alt="" src="../img/116.png" width="450" /></p>
<h3 id="14">1.4 虚电路与数据报网络的比较<a class="headerlink" href="#14" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th></th>
<th><strong>虚电路服务</strong></th>
<th><strong>数据报服务</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>可靠传输的保证</td>
<td>可靠通信由网络保证</td>
<td>可靠通信由主机保证</td>
</tr>
<tr>
<td>连接的建立</td>
<td>必须要</td>
<td>不需要</td>
</tr>
<tr>
<td>地址</td>
<td>每个分组含有一个短的虚电路号</td>
<td>每个分组需要有源地址和目的地址</td>
</tr>
<tr>
<td>状态信息</td>
<td>建立好的虚电路要占用子网表空间</td>
<td>子网不存储状态信息</td>
</tr>
<tr>
<td>路由选择</td>
<td>分组必须经过建立好的路由发送</td>
<td>每个分组独立选择路由</td>
</tr>
<tr>
<td>分组顺序</td>
<td>总是按序到达</td>
<td>可能乱序</td>
</tr>
<tr>
<td>路由器失效</td>
<td>所有经过失效路由器的虚电路都要终止</td>
<td>失效结点可能丢失分组</td>
</tr>
<tr>
<td>差错处理和流量控制</td>
<td>网络或用户主机负责</td>
<td>用户主机负责</td>
</tr>
<tr>
<td>拥塞控制</td>
<td>容易控制</td>
<td>难控制</td>
</tr>
</tbody>
</table>
<h4 id="_1">性能角度<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<ul>
<li>假设总带宽100Mbps，有2个数据源共享带宽<ol>
<li>如果每个数据源按50Mbps的恒定速率发送数据，使用<strong>虚电路服务</strong>：带宽不浪费每个数据源发送数据的带宽都可被保证。   <br />
<img alt="" src="../img/118.png" width="400" /> </li>
<li>如果每个数据源都是突发流量，且最高可达70Mbps，使用<strong>虚电路服务</strong>：<ol>
<li>丢掉一部分数据</li>
<li>按预留带宽提供服务，若频繁流量突发，必定导致频繁过载。
<img alt="" src="../img/119.png" width="400" /></li>
</ol>
</li>
<li>如果每个数据源都是突发流量，且最高可达70Mbps，使用<strong>数据报服务</strong>：性能完全不受影响，也不会过载。
    <img alt="" src="../img/120.png" width="400" /></li>
</ol>
</li>
</ul>
<h4 id="_2">效率角度<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<p><img alt="" src="../img/121.png" width="450" /> </p>
<ul>
<li>假设不考虑A的发送时延和链路传播时延，在上图3个转接节点的情况下，链路上的数据传输速率 <span class="arithmatex">\(B\)</span>  bps，每个分组的长度 <span class="arithmatex">\(P\)</span>  bit，每个分组的开销 <span class="arithmatex">\(H\)</span>  bit，虚电路分组交换的呼叫建立时间 <span class="arithmatex">\(S\)</span> s，每个转接点的转接延迟时间 <span class="arithmatex">\(D\)</span> s，则：<ol>
<li>虚电路分组交换总时延 <span class="arithmatex">\(T=S+3[D+(P+H)/B]\)</span> </li>
<li>数据报分组交换总时延 <span class="arithmatex">\(T=3[D+(P+H)/B]\)</span></li>
</ol>
</li>
</ul>
<h2 id="2internet">2.Internet网际协议<a class="headerlink" href="#2internet" title="Permanent link">&para;</a></h2>
<h3 id="21-ipv4">2.1 IPv4协议<a class="headerlink" href="#21-ipv4" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../img/100.png" />      </p>
<ul>
<li>版本：4bit，表示采用的IP协议版本     </li>
<li>首部长度：4bit，表示整个IP数据报首部的长度       </li>
<li>区分服务：8bit，该字段一般情况下不使用       </li>
<li>总长度： 16bit ，表示整个IP报文的长度,能表示的最大字节为2^16-1=65535字节     </li>
<li>标识： 16bit ， IP软件通过计数器自动产生，每产生1个数据报计数器加1；在ip分片以后，用来标识同一片分片      </li>
<li>标志：3bit，目前只有两位有意义；MF，置1表示后面还有分片，置0表示这是数据报片的最后1个；DF，不能分片标志，置0时表示允许分片       </li>
<li>片偏移： 13bit，表示IP分片后，相应的IP片在总的IP片的相对位置     </li>
<li>生存时间TTL：8bit,表示数据报在网络中的生命周期，用通过路由器的数量来计量，即跳数（每经过一个路由器会减1）     </li>
<li>协议：8bit，标识上层协议（TCP/UDP/ICMP…）    </li>
<li>首部校验和：16bit，对数据报首部进行校验，不包括数据部   </li>
<li>源地址：32bit，标识IP片的发送源IP地址   </li>
<li>目的地址：32bit，标识IP片的目的地IP地址 </li>
<li>选项：可扩充部分，具有可变长度，定义了安全性、严格源路 由、松散源路由、记录路由、时间戳等选项       </li>
<li>
<p>填充：用全0的填充字段补齐为4字节的整数倍    </p>
</li>
<li>
<p>数据报分片：一个链路层数据帧能承载的最大数据量称为最大传输单元（MTU）</p>
<ul>
<li>MTU<ol>
<li>链路MTU</li>
<li>路径MTU</li>
</ol>
</li>
<li>分片策略<ol>
<li>允许途中分片：根据下一跳链路的MTU实施分片</li>
<li>不允许途中分片：发出的数据报长度小于路径MTU（路径MTU发现机制）</li>
</ol>
</li>
</ul>
</li>
</ul>
<p><img WIDTH="450" alt="" src="../img/101.png" /></p>
<h3 id="22-ip">2.2 IP地址<a class="headerlink" href="#22-ip" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>IP地址，网络上的每一台主机（或路由器）的每一个接口都会分配一个全球唯一的32位的标识符    </p>
</li>
<li>
<p>将IP地址划分为固定的类，每一类都由两个字段组成      </p>
</li>
<li>
<p>网络号相同的这块连续IP地址空间称为地址的前缀，或网络前缀  <br />
<img alt="" src="../img/103.png" /></p>
</li>
</ul>
<p>注意区分网络地址和主机地址<br />
<img alt="" src="../img/102.png" width="550" /></p>
<ul>
<li>分类的IP地址:<ol>
<li>IP地址共分为A、B、C、D、E五类，A类、B类、C类为单播地址</li>
<li>IP地址的书写采用点分十进制记法，其中每一段取值范围为0到255
<img alt="" src="../img/106.png" width="400" /></li>
</ol>
</li>
</ul>
<table>
<thead>
<tr>
<th><strong>网络类别</strong></th>
<th><strong>最大可用网络数</strong></th>
<th><strong>第一个可用的网络号</strong></th>
<th><strong>最后一个可用的网络号</strong></th>
<th><strong>每个网络中的最大主机数</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td><span class="arithmatex">\(2^7-2\)</span></td>
<td>1</td>
<td>126</td>
<td><span class="arithmatex">\(2^{24}-2\)</span></td>
</tr>
<tr>
<td>B</td>
<td><span class="arithmatex">\(2^{14}\)</span></td>
<td>128.0</td>
<td>191.255</td>
<td><span class="arithmatex">\(2^{16}-2\)</span></td>
</tr>
<tr>
<td>C</td>
<td><span class="arithmatex">\(2^{21}\)</span></td>
<td>192.0.0</td>
<td>223.255.255</td>
<td><span class="arithmatex">\(2^8-2\)</span></td>
</tr>
</tbody>
</table>
<p>表格中A类地址可用的网络数为<span class="arithmatex">\(2^7-2\)</span>，原因是：网络号字段全为0的IP地址是保留地址；网络号为127的IP地址是环回自检地址。</p>
<ul>
<li>子网划分：<ol>
<li>子网划分(subnetting)，在网络内部将一个网络块进行划分以供多个内部网络使用，对外仍是一个网络</li>
<li>子网(subnet)，一个网络进行子网划分后得到的一系列结果网络称为子网</li>
<li>子网掩码(subnet mask)，与 IP 地址一一对应，是32 bit 的二进制数，置1表示网络位，置0表示主机位</li>
</ol>
</li>
</ul>
<div class="admonition example">
<p class="admonition-title">一个例子🌰</p>
<p><img alt="" src="../img/104.png" width="450" />  </p>
</div>
<ul>
<li>CIDR（无类域间路由）：是在变长子网掩码的基础上，提出的一种消除传统A、B、C类地址及划分子网的概念。     <ul>
<li>将32位的IP地址划分为前后两个部分，并采用斜线记法，即在IP地址后加上“/”，然后再写上网络前缀所占位数。       <br />
<img alt="" src="../img/122.png" width="400" /></li>
</ul>
</li>
</ul>
<details class="question">
<summary>一个题目</summary>
<ul>
<li>
<p>A large number of consecutive IP addresses are available starting at 202.101.0.0. Suppose that five organizations, A, B, C, D, and E, request 1024, 2000, 2000, 4096 and 512 addresses (including special IPs), respectively, and in that order. Please assign the IP address and the mask in the w.x.y.z/s notation (following the order of allocating the minimum address segment firstly).</p>
</li>
<li>
<p>A:1024 &lt;= 2^10，需要10bits，网络前缀位数为 32-10 = 22位，CIDR:202.101.00000000.00000000/22 = 202.101.0.0/22 ，倒数第二位中只能从倒数第三个0开始赋值，范围0，4，8，12</p>
</li>
<li>B:2000 &lt;= 2^11，需要11bits，网络前缀位数为 32-11 = 21位，CIDR:202.101.00001000.00000000/21 = 202.101.8.0/21，倒数第二位中只能从倒数第四个0开始赋值，范围0，8，16，32</li>
<li>C:2000 &lt;= 2^11，需要11bits，网络前缀位数为 32-11 = 21位，CIDR:202.101.00001000.00000000/21 = 202.101.16.0/21，倒数第二位中只能从倒数第四个0开始赋值，范围0，8，16，32</li>
<li>D:4096 &lt;= 2^12，需要12bits，网络前缀位数为 32-12 = 20位，CIDR:202.101.00010000.00000000/21 = 202.101.32.0/20，倒数第二位中只能从倒数第五个0开始赋值范围0，16，32，64</li>
<li>E:512 &lt;= 2^9，需要9bits，网络前缀位数为 32-9 = 23位，CIDR:202.101.00010000.00000000/21 = 202.101.4.0/23，倒数第二位中只能从倒数第二个0开始赋值范围0，2，4，6</li>
</ul>
</details>
<ul>
<li>
<p>最长前缀匹配：  <br />
    IP地址与IP前缀匹配时，总是选取子网掩码最长的匹配项<br />
<img alt="" src="../img/105.png" width="450" /></p>
</li>
<li>
<p>IPv4地址如何获取：</p>
<ol>
<li>静态设定：申请固定IP地址，手工设定，如路由器、服务器</li>
<li>动态获取<ol>
<li>使用DHCP协议或其他动态配置协议</li>
<li>当主机加入IP网络，允许主机从DHCP服务器动态获取IP地址</li>
<li>可以有效利用IP地址，方便移动主机的地址获取</li>
</ol>
</li>
</ol>
</li>
</ul>
<h3 id="23-dhcp">2.3 DHCP<a class="headerlink" href="#23-dhcp" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>DHCP：动态主机配置协议</p>
<ol>
<li>当主机加入IP网络，允许主机从DHCP服务器动态获取IP地址</li>
<li>可以有效利用IP地址，方便移动主机的地址获取</li>
</ol>
</li>
<li>
<p>工作模式：客服/服务器模式(C/S)</p>
<ul>
<li>基于UDP 工作，服务器运行在67 号端口，客户端运行在68 号端口
<img alt="" src="../img/107.png" width="400" /></li>
</ul>
</li>
<li>
<p>工作过程：</p>
<ol>
<li>DHCP 客户从UDP端口68以广播形式向服务器发送发现报文（DHCPDISCOVER）</li>
<li>DHCP 服务器单播发出提供报文（DHCPOFFER）</li>
<li>DHCP 客户从多个DHCP服务器中选择一个，并向其以广播形式发送DHCP请求报文（DHCPREQUEST）</li>
<li>被选择的DHCP服务器单播发送确认报文（DHCPACK）  <br />
<img alt="" src="../img/108.png" width="400" /></li>
</ol>
</li>
</ul>
<div class="admonition question">
<p class="admonition-title">IP 与 MAC地址</p>
<p>IP数据报经过不同链路时，IP 数据报中封装的IP地址不发生改变，而Mac帧中的硬件地址是发生改变的。   </p>
<ul>
<li>问题：给定B的IP地址，如何获取B的MAC地址？</li>
<li>需要ARP协议</li>
</ul>
</div>
<h3 id="24-arp">2.4 ARP<a class="headerlink" href="#24-arp" title="Permanent link">&para;</a></h3>
<p>A已知B的IP地址，需要获得B的MAC地址（物理地址）</p>
<ul>
<li>如果A的ARP表中缓存有B的IP地址与MAC地址的映射关系，则直接从ARP表获取</li>
<li>如果A的ARP表中未缓存有B的IP地址与MAC地址的映射关系，则A广播包含B的IP地址的ARP query分组<ul>
<li>在局域网上的所有节点都可以接收到ARP query</li>
</ul>
</li>
<li>B接收到ARP query分组后，将自己的MAC地址发送给A</li>
<li>A在ARP表中缓存B的IP地址和MAC地址的映射关系<ul>
<li>超时时删除</li>
</ul>
</li>
</ul>
<p><img alt="" src="../img/109.png" width="450" /></p>
<h3 id="25-nat">2.5 NAT<a class="headerlink" href="#25-nat" title="Permanent link">&para;</a></h3>
<p>网络地址转换(NAT)用于解决IPv4地址不足的问题，是一种将私有（保留）地址转化为公有IP地址的转换技术。</p>
<ul>
<li>私有IP地址：<ol>
<li>A类地址：10.0.0.0--10.255.255.255 </li>
<li>B类地址：172.16.0.0--172.31.255.555</li>
<li>C类地址：192.168.0.0--192.168.255.255</li>
</ol>
</li>
</ul>
<p>内网内部的地址可以有很多，但要发到外网只有1个出口地址。</p>
<p><img alt="" src="../img/123.png" width="400" /></p>
<div class="admonition question">
<p class="admonition-title">同一主机不同应用，或者不同主机的同一端口，NAT转换如何处理？</p>
<p>需要区分到每一个主机的每一个应用    </p>
<ul>
<li>同一主机不同应用：在出口地址处使用不同的端口号</li>
<li>不同主机的同一端口：在出口地址处使用不同的端口号</li>
</ul>
</div>
<ul>
<li>
<p>网络地址转换：传输层TCP/UDP拥有16-bit 端口号字段</p>
</li>
<li>
<p>优点：</p>
<ol>
<li>节省合法地址，减少地址冲突</li>
<li>灵活连接Internet</li>
<li>保护局域网的私密性</li>
</ol>
</li>
<li>缺点：<ol>
<li>违反了IP的结构模型，路由器处理传输层协议（路由器是三层的设备，而传输层在第四层）</li>
<li>违反了端到端的原则</li>
<li>违反了最基本的协议分层规则</li>
<li>不能处理IP报头加密</li>
<li>新型网络应用的设计者必须要考虑NAT场景，如P2P应用程序</li>
</ol>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>普通路由器在转发IP分组时，其源IP地址和目的IP地址都不会改变，而NAT路由器转发IP分组时，一定要更换其IP地址（转换源IP地址或目的IP地址）。普通路由器仅工作在网络层，而NAT路由器转发数据报时需要查看和转换<font color = "red">传输层</font>的端口号。     </p>
</div>
<h3 id="26-internet">2.6 Internet控制报文协议<a class="headerlink" href="#26-internet" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>ICMP: 互联网控制报文协议</p>
</li>
<li>
<p>ICMP报文类型：</p>
<ol>
<li>ICMP 差错报告报文<ul>
<li>终点不可达：不可达主机、不可达网络，无效端口、协议</li>
</ul>
</li>
<li>ICMP 询问报文<ul>
<li>回送请求/回答(ping使用)</li>
</ul>
</li>
</ol>
</li>
<li>
<p>PING (Packet InterNet Groper) </p>
<ol>
<li>PING 用来测试两个主机之间的连通性</li>
<li>PING 使用了ICMP 回送请求与回送回答报文</li>
</ol>
</li>
<li>
<p>Traceroute和ICMP：如何知道整个路径上路由器的地址？ 使用TraceRT命令</p>
<ol>
<li>源向目的地发送一系列UDP段(不可能的端口号)<ol>
<li>第一个TTL =1</li>
<li>第二个TTL=2, 等</li>
</ol>
</li>
<li>当第n个数据报到达第n和路由器:<ol>
<li>路由器丢弃数据报</li>
<li>并向源发送一个ICMP报文(类型11, 编码0)</li>
<li>报文的源IP地址就是该路由器的IP地址</li>
</ol>
</li>
</ol>
</li>
</ul>
<p>以上做法不一定准确/正确。</p>
<details class="question">
<summary>一道思考题</summary>
<p><img alt="" src="../img/129.png" />  </p>
<p>这道题是一道综合题，首先需要了解IPv4包字段的具体组成。</p>
<ul>
<li>TTL字段位于第9个字节，因此p2的TTL = 0x31 = 49 
    <img alt="" src="../img/130.png" />  </li>
<li>同第一题，可以找到p6的TTL = 0x40 = 64,同时可以通过标识号来确定唯一的包，标识号位于第5个字节，因此p6的标识号为0x68，可以发现p5的标识号与p6相同，所以p5和p6为一个包传输的不同过程。可以找到p5的TTL = 0X31 = 49,那么从p6到p6经过了64 - 49 = 15跳，所以答案为15。 </li>
<li>源地址和目标地址分别位于13-16字节和17-20字节，因此寻找源地址不为10.0.0.8的packet即可，从图中可以看出是p2。  <br />
<img alt="" src="../img/131.png" />
    对于第三题的第二问，对应的知识点是MAC帧的最小长度，回忆一下，数据字段的最小长度是46： <br />
<img alt="" src="../img/132.png" width="350" />
    而在IPv4字段中，标识长度的字段位于第四个字节，从图中可得p3的总长度为0x28 = 40 &lt; 46，因此需要进行额外的填充。  <br />
<img alt="" src="../img/133.png" /></li>
<li>第四题需要找出B的公网IP，可以从图中寻找发送给B的数据包（不能找从B发的，因为发的地址是内网地址，但目的地址是公网地址），从图中可以看得出p1/p3/p4都是从A发到B的，因此B的公网IP为 A0.08.00.50, 即 160.8.0.80</li>
<li>第五题同理，寻找发送给A的数据包，即p2/p6/p7，但是只有p6/p7的目的地址为公网地址（p2的目的地址虽然是A，但仍然是内网的10.0.0.8），因此通过p6/p7可得A的地址为 C0.0A.01.06, 即 192.10.1.6</li>
<li>首先要明白这一问的问题，第六题问的是p7采用MTU800分片后两片MTU的lengh、MF以及offset值。    <ol>
<li>首先可以较为轻易地得到MF值（1表示后面还有分片，0表示这是数据报片的最后1个），所以第一个分片的MF为1，第二个分片的MF为2。</li>
<li>然后计算两个分片的长度。首先从图中可以看出p7的总长度，为0x0600，即1536（包含头部的20字节和数据字段的1516字节）。已知分片最大长度为800字节，去掉作为首部的20字节，还剩780可以用于数据字段。但要注意，<font color = "red">数据字段的长度需要是8的倍数</font>，因为在后续的分片中，<font color = "red">offset的值是以8个字节为单位的</font>，所以寻找距离780最近的8的倍数，为776，因此第一个分片的长度应该等于数据字段＋首部字段，即 776 + 20 = 796字节；在第二个分片中，还需要存储剩余的数据字段1516 - 776 = 740字节。此时，<font color = "red">因为第二个分片已经是最后一个分片，无需考虑下一个分片的offset，所以数据字段的长度不需要是8的倍数</font>，所以第二个分片的总长度为740 + 20 = 760字节。</li>
<li>最后计算偏移量，第一个分片的偏移量为0；第二个分片的偏移量（也就是第二个分片中的数据字段位于原数据字段的位置/8）为 776 / 8 = 97。</li>
</ol>
</li>
</ul>
</details>
<h2 id="3">3.路由算法<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="31">3.1 优化原则<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<p>所有的源节点到一个指定目标节点的最优路径的集合构成一棵以目标节点为根的树</p>
<ul>
<li>一棵路由器B的汇集树（距离度量单位：步长数） <br />
<img alt="" src="../img/124.png" width="450" /></li>
</ul>
<h3 id="32">3.2 最短路径算法<a class="headerlink" href="#32" title="Permanent link">&para;</a></h3>
<p>用于计算一个节点到其他所有节点的最短路径，主要特点是以起始点为中心向外逐层扩展，直到扩展到终点为止</p>
<ul>
<li>Dijkstra算法</li>
</ul>
<h3 id="33">3.3 距离向量路由<a class="headerlink" href="#33" title="Permanent link">&para;</a></h3>
<p>距离向量路由的基础是Bellman-Ford算法，它用于计算单源最短路径。每个节点以自身为源点执行Bellman-Ford算法，所以全局上可以解决任意结点对之间的最短路径问题。</p>
<ul>
<li>
<p>Bellman-Ford 方程</p>
<ol>
<li>假设Dx(y) 是 从x到y最小代价路径的代价值</li>
<li>
<p>则：Dx(y) = min {c(x,m) + Dm(y) }  <br />
    其中m为x的邻居, c(x,m)为m到X的距离</p>
</li>
<li>
<p>示例：</p>
<ol>
<li>已获知Dv(z) = 5, Dx(z) = 3, Dw(z) = 3</li>
<li>Du(z)= min { c(u,v) + Dv(z), c(u,x) + Dx(z), c(u,w) + Dw(z) }  <br />
= min {2 + 5,1 + 3, 5 + 3}    <br />
= 4       <br />
<img alt="" src="../img/125.png" /></li>
</ol>
</li>
<li>距离向量（Distance Vector）算法基本思想: </li>
<li>每个节点周期性地向邻居发送它自己到某些节点的距离向量；</li>
<li>当节点x接收到来自邻居的新DV估计，它使用B-F方程更新其自己的DV : <br />
<span class="arithmatex">\(D_{_x}(y)\leftarrow min_{_v}\{c(x,v)+D_{_v}(y)\}\quad for \;\;each\;\; node y\in N\)</span></li>
</ol>
</li>
<li>
<p>距离向量算法，每个结点x维护下列路由信息：</p>
<ol>
<li>从x到每个直接相连邻居v的链路费用c(x,v)。</li>
<li>结点x的距离向量，即x到网络中其他结点的费用。这是一组距离，因此称为<font color = "red">距离向量</font>。</li>
<li>它收到的每个邻居的距离向量，即x的每个邻居到网络中其他结点的费用。</li>
</ol>
</li>
<li>
<p>距离向量算法特点：迭代的、分布式的</p>
<ol>
<li>每次本地迭代由下列引起: 本地链路费用改变、邻居更新报文</li>
<li>分布式:各节点依次计算，相互依赖</li>
</ol>
</li>
<li>
<p>It reacts rapidly to good news, but leisurely to bad news:</p>
<ol>
<li>好消息传播得很快： <br />
<img alt="" src="../img/126.png" /></li>
<li>坏消息（A突然断电）会导致迭代的计数增加，但节点们还以为路径是好的，直到数值变得很大才能发现（因此也叫count-to-infinity problem）：  <br />
<img alt="" src="../img/127.png" /></li>
</ol>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">关于坏消息导致的 count-to-infinity problem 更直观的解释</p>
<p><img alt="" src="../img/134.png" width="400" />     </p>
<ul>
<li>有X、Y、Z三个节点。如果Y检测到它到X的路径费用由4增加到了60。Y开始更新距离向量。注意此时Z的距离向量为 <span class="arithmatex">\(DV_z\)</span> 更新为：d(x) = 5 + 1 = 6, d(Y) = 1，d(z) = 0。于是Y在更新距离向量时发现Z到X的距离只有5，所以可以先到Z再到X，于是Y的距离向量 <span class="arithmatex">\(DV_y\)</span> 更新为：d(x) = 5 + 1 = 6, d(Y) = 0, d(z) = 1。</li>
<li>
<p>显而易见，这个逻辑显然是错误的，因为Z到X的距离为5的前提是要经过Y，但Y更新后的路径又要经过Z，这就形成了一个选路环路（routing-loop）问题。因为Y的距离向量更新了（虽然是错误的），但它还是向Z发送了更新报文。Z收到更新报文后，比较了下邻居们到X的距离，发现经过Y的路径距离为1 + 6 = 7，小于直接到X的距离，于是Z也更新的自己的距离向量，然后又将更新后的距离向量发给Y。Y收到后又更新向量为8，然后再发给Z……这样循环往复，更新报文在Y和Z之间传来传去，直到第44次迭代后，Z算出它经由Y的路径费用大于50为止。此时，Z最终确定到X的最短路径费用是直接到达X的费用50，而Y也得到了最短路径是经Z到X的费用51。</p>
</li>
<li>
<p>可以看出，虽然最后还是得到了正确的信息（最后的50和51是正确的！），但坏消息的传播与好消息相比实在是慢太多了！而且，如果X和Y之间的费用为10000，Z和X的费用是9999时，就会出现计数到无穷（count-to-infinity）的问题！</p>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">一个解决方式？Poisoned reverse (毒性逆转, RFC 1058) </p>
<ul>
<li>上述的选路环路问题可以通过毒性逆转的技术加以避免。    </li>
<li>
<p>它的基本思想是：如果Z的最短路径要通过邻居Y，那么它将告诉Y自己到目的节点的距离是∞。这样，Z向Y撒了一个<font color = "red">善意的谎言</font>，使得只要Z经过Y选路到X，它就会一直持续讲述这个谎言，这样Y也就永远不会尝试从Z选路到X了，也就避免了环路问题。</p>
</li>
<li>
<p>我们将毒性逆转技术应用于上例。Y在更新自己的距离向量时，发现Z到X的距离是∞，于是它将d(x)无奈地更新为60，并向Z发送了更新报文。Z收到报文后更新自己的d(X)为50（直接选路到X），并发给Y更新报文（此时因为Z不需要经过Y进行选路，因此将告诉Y自己到X的距离为50）。Y在接收到Z的报文后，重新将距离更新为1 + 50 = 51，并告诉Z自己到X的距离是∞（实际是51）。Z收到报文后，发现最低耗费并没有改变，因此算法进入静止状态。</p>
</li>
<li>看上去这个解决方式似乎不错？</li>
<li>
<p>但是，当涉及3个或更多节点（而不仅仅是两个直接相连的邻居节点）的环路将不能被毒性逆转技术检测到，如下例： <br />
<img alt="" src="../img/135.png" width="400" /></p>
</li>
<li>
<p>当C和D之间的连接断开时，依次发生如下事件：</p>
<ol>
<li>A收到来自C的坏消息，然后将选择从B到达D</li>
<li>A向C发送更新报文</li>
<li>C向B发送更新报文</li>
</ol>
</li>
<li>这种问题出现的原因是，A和B无法同时收到来自C的更新报文然后更新自己的距离向量。比如这里，B与A相比得到的更新报文时间要晚，这就给A造成了“错觉”，在A看来，虽然从C到不了D，但是选B也可以。然后它又把这个错误的好消息告诉了C，让C也以为自己又能和D连接了。最后，终于想到忽略了B，又发送了报文给B。这样，A、B、C都以为自己和D联系上了！但实际上D和它们已经隔离了。</li>
</ul>
</div>
</div>
<h3 id="34">3.4 链路状态路由<a class="headerlink" href="#34" title="Permanent link">&para;</a></h3>
<ul>
<li>链路状态是指本路由器都和哪些路由器相邻，以及相应链路的代码。链路状态算法要求每个结点都具有全网拓扑结构图（这个拓扑结构图在全网范围内是一致的），它们执行下列两项任务：<ol>
<li>主动测试所有相邻结点的状态</li>
<li>定期地将链路状态传播给所有其他结点</li>
</ol>
</li>
</ul>
<p>在链路状态算法中，结点每收到一个链路状态报文，便用其更新自己地网络状态“视野图”，一旦链路状态发生变化，就使用Dijkstra算法重新计算到达所有其他结点地最短路径。</p>
<ul>
<li>
<p>链路状态（Link State）路由可分为五个部分：</p>
<ol>
<li>发现邻居，了解他们的网络地址；</li>
<li>设置到每个邻居的成本度量；</li>
<li>构造一个分组，分组中包含刚收到的所有信息；</li>
<li>将此分组发送给其他的路由器；</li>
<li>计算到其他路由器的最短路径。</li>
</ol>
</li>
<li>
<p>发现邻居，了解他们的网络地址：
    <img alt="" src="../img/128.png" width="450" /></p>
</li>
<li>
<p>2.设置到每个邻居的成本度量</p>
<ol>
<li>开销/度量/代价：<ol>
<li>自动发现设置或人工配置</li>
<li>度量：带宽、跳数、延迟、负载、可靠性等</li>
</ol>
</li>
<li>
<p>常用度量：链路带宽（反比）</p>
<blockquote>
<p>例如：1-Gbps以太网的代价为1，100-Mbps以太网的代价为10</p>
</blockquote>
</li>
<li>
<p>可选度量：延迟</p>
<ol>
<li>发送一个echo包，另一端立即回送一个应答</li>
<li>通过测量往返时间RTT，可以获得一个合理的延迟估计值</li>
</ol>
</li>
</ol>
</li>
<li>
<p>构造一个分组，分组中包含刚收到的所有信息</p>
<ul>
<li>构造链路状态分组（link state packet）<ol>
<li>发送方标识</li>
<li>序列号</li>
<li>年龄</li>
<li>邻居列表</li>
</ol>
</li>
</ul>
</li>
<li>
<p>将LS分组发送给其他的路由器</p>
<ol>
<li>每个LS分组包含一个序列号，且递增</li>
<li>路由器记录所收到的所有（源路由器、序列号）对</li>
<li>当一个新分组到达时，路由器根据记录判断：<ol>
<li>如果是新分组，洪泛广播       </li>
<li>如果是重复分组，丢弃</li>
<li>如果是过时分组，拒绝</li>
</ol>
</li>
</ol>
</li>
</ul>
<h3 id="_3">距离向量和链路状态算法比较：<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<ul>
<li>网络状态信息交换的范围<ol>
<li>DV：邻居间交换</li>
<li>LS：全网扩散</li>
</ol>
</li>
<li>网络状态信息的可靠性<ol>
<li>DV：部分道听途说</li>
<li>LS：自己测量</li>
</ol>
</li>
<li>健壮性:<ol>
<li>DV：计算结果传递，健壮性差</li>
<li>LS：各自计算，健壮性好</li>
</ol>
</li>
<li>收敛速度：<ol>
<li>DV: 慢,可能有计数到无穷问题</li>
<li>LS: 快</li>
</ol>
</li>
</ul>
<h3 id="35">3.5 层次路由<a class="headerlink" href="#35" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>产生原因：</p>
<ol>
<li>地址分配往往是随机的，难以进行高效的地址聚合</li>
<li>每个网络的网络管理员有自己的管理方法和思路，并不希望每个路由器都干涉本网络内部的地址分配等问题</li>
</ol>
</li>
<li>
<p>基本思路：</p>
<ol>
<li>自治系统内部使用内部网关路由协议，Interior Gateway Protocols (IGP)<ol>
<li>每个自治系统域内路由算法可不同</li>
<li>典型IGP协议：OSPF，RIP，IS-IS，IGRP，EIGRP……</li>
</ol>
</li>
<li>自治系统之间之间使用外部网关路由协议，Exterior Gateway Protocols (EGP)<ol>
<li>各自治系统域之间的路由需统一</li>
<li>典型EGP协议：BGP</li>
</ol>
</li>
</ol>
</li>
</ul>
<h3 id="36">3.6 广播路由（可选）<a class="headerlink" href="#36" title="Permanent link">&para;</a></h3>
<p>广播（Broadcasting）：源主机同时给全部目标地址发送同一个数据包。    </p>
<ul>
<li>方法1：给每个主机单独发送一个数据包<ol>
<li>效率低、浪费带宽</li>
<li>Server需要知道每个目的地址</li>
</ol>
</li>
<li>方法2：多目标路由（multidestination routing）<ol>
<li>在需要转发的路由器线路复制一次该数据报</li>
<li>网络利用率高</li>
<li>Server依然需要知道所有的目的地址</li>
</ol>
</li>
<li>
<p>方法3：泛洪（flooding）</p>
<ol>
<li>一种将数据包发送到所有网络节点的简单方法</li>
<li>将每个进入数据包发送到除了进入线路外的每条出去线路</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">无控制的泛洪</p>
<p>环路可能导致广播风暴，路由器可能收到多个副本，节点需要跟踪已泛洪的数据包以阻止洪泛。即使利用跳数来限制，也会出现成倍爆炸。</p>
</div>
</li>
<li>
<p>解决方法：受控制的泛洪（每个路由器进行有选择的泛洪）</p>
<ul>
<li>
<p>序号控制泛洪（sequence-number-controlled flooding）</p>
<ol>
<li>广播数据包X从接口1到达R</li>
<li>R查看数据包来源S和广播序号n，比对R的序号表</li>
<li>序号表中有该数据包的记录吗？<ol>
<li>是，丢弃（曾经已经收到并转发过）</li>
<li>否，在序号表中记录，并在接口2和3转发</li>
</ol>
</li>
</ol>
</li>
<li>
<p>逆向路径转发（reverse path forwarding, RPF）：假设R的路由表中表示了到达各网络的最优路径。</p>
<ol>
<li>广播数据包X从接口1到达R</li>
<li>R查看数据包来源S，比对R的路由表</li>
<li>X的来源是N1吗？<ol>
<li>是，X是从最佳路径来的，向接口2和接口3转发</li>
<li>否，X是重复包，丢弃</li>
</ol>
</li>
</ol>
<p><font color = "red">不能完全避免重复分组</font>       <br />
<img alt="" src="../img/136.png" width="200" />      </p>
</li>
</ul>
</li>
</ul>
<div class="admonition example">
<p class="admonition-title">一个例子🌰</p>
<p><img alt="" src="../img/137.png" />   </p>
<ul>
<li>
<p>图1是整个网络。图2是全局的最优路径（但实际上每个节点并不知道），因此需要使用图3，当发送到某个节点时，才能发现是否需要转发，也就是需要去试错，并不一定能按照最优路径走，会多出一些重复的尝试。</p>
</li>
<li>
<p>I broadcasts 4 pkts to F,H,J,N：All on preferred paths, …</p>
</li>
<li>Look at N：Transmits to M and O </li>
<li>Look at M: M continues since N-M is preferred (in sink tree) </li>
<li>Look at O: O stops since N-O is not on preferred path</li>
</ul>
</div>
<ul>
<li>
<p>方法4：生成树(spanning tree)</p>
<ol>
<li>源节点向所有属于该生成树的特定链路发送分组</li>
<li>改进了逆向路径转发</li>
<li>没有环路</li>
<li>最佳使用带宽</li>
<li>最少副本，消除了冗余分组</li>
<li>一个路由器可以不必知道整颗树，只需要知道在一颗树中的邻居即可</li>
</ol>
<p><img alt="" src="../img/138.png" width="250" /></p>
</li>
</ul>
<h3 id="37">3.7 组播路由<a class="headerlink" href="#37" title="Permanent link">&para;</a></h3>
<p>组播（multicasting）：源主机给网络中的一部分目标用户发送数据包。    </p>
<ul>
<li>
<p>IGMP (Internet Group Management Protocol)协议：路由器获悉该网段的组播组成员</p>
</li>
<li>
<p>常用组播地址段：224.0.0.0/24：局域网组播地址(一跳子网内使用) </p>
<ol>
<li>24.0.0.1     LAN上所有设备</li>
<li>224.0.0.2     LAN上所有路由器</li>
<li>224.0.0.5     LAN上所有OSPF路由器</li>
<li>224.0.0.251 LAN上所有DNS服务器</li>
</ol>
<p><font color = "red">因为前24位用来标志子网，所以只能使用最后一位。224.0.1.0非法。</font></p>
</li>
<li>
<p>组播的实现：</p>
<ol>
<li>生成树：最佳生成树的使用取决于组的密度分布<ol>
<li>密集分布：接受者遍布在网络的大部分区域</li>
<li>稀疏分布：大部分网络区域都不属于组播组</li>
</ol>
</li>
</ol>
</li>
<li>
<p>密集分布，基于源点树（source-based trees）：</p>
<ol>
<li>链路状态路由算法</li>
<li>距离向量路由算法</li>
</ol>
<blockquote></blockquote>
<ul>
<li>问题：<ol>
<li>大型网络中，组播源很多时，路由器需生成多颗棵树，工作量巨大。 </li>
<li>路由器需要大量空间来存储多棵树。</li>
</ol>
</li>
</ul>
</li>
<li>
<p>稀疏分布，基于核心树（core-based trees）：</p>
<ol>
<li>多个组播源共享树</li>
<li>每个路由器只需要保存一棵树</li>
<li>不属于共享树的路由器不需要为组做任何工作</li>
</ol>
<blockquote></blockquote>
<ul>
<li>问题：<ol>
<li>可能无法达到最优。</li>
<li>如果只有一个发送者，将发送者作为核心是最优的。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="38">3.8 选播路由（可选）<a class="headerlink" href="#38" title="Permanent link">&para;</a></h3>
<p>选播（Anycast）：将数据包传送给最近的一个组成员
在有多个服务器的情况下，用户希望快速获得正确信息，而不在乎从哪个服务器获得。</p>
<blockquote>
<p>例如：报警电话，是离他最近的警察局响应（不需要广播和组播），始终选择最近的服务器。</p>
</blockquote>
<div class="admonition tip">
<p class="admonition-title">单播、广播、组播、选播的区别</p>
<p><img alt="" src="../img/139.png" /></p>
</div>
<h2 id="4internet">4.Internet路由协议<a class="headerlink" href="#4internet" title="Permanent link">&para;</a></h2>
<h3 id="41-opsf-">4.1 OPSF-内部网关路由协议<a class="headerlink" href="#41-opsf-" title="Permanent link">&para;</a></h3>
<p>OSPF是网络层协议，它不用UDP或TCP，而直接用IP数据报传送。</p>
<ul>
<li>OSPF（Open Shortest Path First）：采用分布式的链路状态算法<ol>
<li>向本自治系统中所有路由器<font color = "red">洪泛</font>信息</li>
<li>发送的信息就是与本路由器<font color = "red">相邻</font>的所有路由器的链路状态</li>
<li>只有<font color = "red">当链路状态发生变化时</font>路由器才用洪泛法发送此信息</li>
</ol>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">链路状态</p>
<ul>
<li>“链路状态”就是说明本路由器都和哪些路由器相邻，以及该链路的“度量”(metric)</li>
<li>OSPF度量值一般包括费用、距离、时延、带宽等</li>
<li>由于各路由器之间频繁地交换链路状态信息，因此所有的路由器最终都能建立一个<font color = "red">链路状态数据库LSDB</font></li>
</ul>
</div>
<ul>
<li>
<p>OSPF区域的概念：</p>
<ol>
<li>主干区域</li>
<li>非主干区域  </li>
</ol>
<p><img alt="" src="../img/140.png" width="350" />   <br />
Link State只在除了Area0（主干区域）的区域中运行</p>
<ul>
<li>路由器角色<ol>
<li>内部路由器(Internal Router，IR)</li>
<li>区域边界路由器(Area Bounder Router，ABR)</li>
<li>自治系统边界路由器(AS Bounder Router, ASBR)</li>
</ol>
</li>
</ul>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">思考题:</p>
<ul>
<li>为什么OSPF协议适合大型网络？    <br />
    为了确保链路状态数据库与全网的状态保持一致，OSPF还规定每隔一段时间（如30min）要刷新一次数据库中的链路状态。因为一个路由器的链路状态只涉及与相邻路由器的连通状态，与整个网络的规模并无直接关系，所以当互联网规模很大时，OSPF要比RIP好得多。</li>
<li>OSPF会不会存在“坏消息传得比较慢”的问题？    <br />
    不会，因为使用的是LS算法，DV算法才会坏消息传得慢。</li>
</ul>
</div>
<h3 id="42-rip-">4.2 RIP-内部网关路由协议<a class="headerlink" href="#42-rip-" title="Permanent link">&para;</a></h3>
<p>路由选择协议RIP（Routing Information Protocol）是基于距离矢量算法的协议，是应用层协议，它在传输层使用UDP。</p>
<ul>
<li>
<p>使用<font color = "red">跳数</font>衡量到达目的网络的距离</p>
<ol>
<li>RIP 认为一个<font color = "red">好的路由</font>就是它通过的路由器的数目少，即“距离短”（RIP选择的路径不一定是时间最短的，但一定是具有最少的路由跳数）</li>
<li>RIP 允许一条路径最多只能包含15个路由器</li>
</ol>
</li>
<li>
<p>RIP协议的基本思想</p>
<ol>
<li>仅和<font color = "red">相邻路由器</font>交换信息（交换的是DV里面当前节点到所有节点的最短距离）</li>
<li>路由器交换的内容是自己的<font color = "red">路由表</font></li>
<li>周期性更新：<font color = "red">30s</font></li>
</ol>
</li>
</ul>
<h3 id="43-bgp-">4.3 BGP-外部网关路由协议<a class="headerlink" href="#43-bgp-" title="Permanent link">&para;</a></h3>
<p>BGP是不同自治系统AS的路由器之间交换路由信息的协议，是一种外部网关协议。BGP采用的是<font color = "red">路径向量</font>路由选择协议，它与距离向量协议（如RIP）和链路状态协议（如OSPF）都有很大的区别。</p>
<p>BGP协议是应用层协议，基于TCP。  </p>
<ul>
<li>路由协议<ol>
<li>内部网关协议IGP：有RIP 和、OSPF、ISIS 等多种具体的协议</li>
<li>外部网关协议EGP：目前使用的协议就是BGP</li>
</ol>
</li>
</ul>
<p>IGP和EGP不是具体的协议名称，而是一种类型。</p>
<p>边界网关协议BGP (Border Gateway Protocol) ：目前互联网中唯一实际运行的自治域间的路由协议。</p>
<ul>
<li>BGP功能<ol>
<li>eBGP：从相邻的AS获得网络可达信息</li>
<li>iBGP： 将网络可达信息传播给AS内的路由器</li>
<li>基于网络可达信息和策略决定到其他网络的“最优”路由</li>
</ol>
</li>
</ul>
<p><img alt="" src="../img/141.png" width="500" /></p>
<ul>
<li>
<p>BGP会话:两个BGP路由器通过TCP连接交换BGP报文   <br />
    通告到不同网络前缀的路径，即路径向量协议</p>
</li>
<li>
<p>路径通告：接收者要明确知道经过了哪几跳（知道整条路径，而不是只知道下一跳）</p>
<ol>
<li>当AS3的路由器3a向AS2的路由器2c通告路径AS3 X时,AS3向AS2承诺它会向X转发数据包。</li>
<li>AS2的路由器2c从AS3的路由器3a接收到路径AS3, X</li>
<li>根据AS2的策略，AS2的路由器2c接受路径AS3, X，通过iBGP传播给AS2的所有路由器。</li>
<li>根据AS2策略，AS2的路由器2a通过eBGP向AS1的路由器1c通告从AS3的路由器3a接收到路径AS2, AS3, X。     <br />
<img alt="" src="../img/142.png" />      </li>
</ol>
<p>路由器可能会学到多条到目的网络的路径。</p>
</li>
<li>
<p>BGP报文：BGP通过TCP的179端口交换报文      </p>
<ol>
<li>Open报文：用于建立BGP对等体（peer）之间的会话连接，协商BGP参数（该过程需要认证）</li>
<li>Update报文：用于在对等体之间交换路由信息</li>
<li>Keepalive报文：用于保持BGP会话连接</li>
<li>Notification报文：用于差错报告和关闭BGP连接</li>
</ol>
</li>
</ul>
<h3 id="44-mpls">4.4 标签交换和MPLS<a class="headerlink" href="#44-mpls" title="Permanent link">&para;</a></h3>
<p>MPLS(MultiProtocol Label Switching)全称是多协议标签交换：标签是指每个分组被分配一个标签，路由器根据该标签对分组进行转发。交换是指标签的交换，MPLS 报文交换和转发是基于标签的。</p>
<ul>
<li>标签交换路由器LSR<ol>
<li>支持MPLS的路由器</li>
<li>具备标签交换、路由选择两种功能</li>
</ol>
</li>
<li>MPLS 域：所有相邻的支持MPLS技术的路由器构成的区域。</li>
<li>标签分配协议LDP：用来在LSR之间建立 LDP 会话并交换Label/FEC映射信息。</li>
</ul>
<p><img alt="" src="../img/143.png" width="350" /></p>
<h2 id="5">5. 路由器工作原理<a class="headerlink" href="#5" title="Permanent link">&para;</a></h2>
<h3 id="51">5.1 路由器概述<a class="headerlink" href="#51" title="Permanent link">&para;</a></h3>
<ul>
<li>路由器是互联网最主要的网络设备，包含2个核心功能<ol>
<li>控制层：运行各种路由协议：BGP、OSPF、RIP，学习去往不同目的的转发路径：路由表</li>
<li>数据层：根据上述路由表，将收到的IP分组转发到正确的下一跳链路</li>
</ol>
</li>
</ul>
<h3 id="52">5.2 路由器控制层<a class="headerlink" href="#52" title="Permanent link">&para;</a></h3>
<ul>
<li>若存在多个“去往同一目的IP前缀”的不同类型路由，路由
器根据优先级选择最佳路由。</li>
<li>优先级数值越小，优先级越高:     <br />
<img alt="" src="../img/144.png" /></li>
</ul>
<h3 id="53">5.3 路由器数据层<a class="headerlink" href="#53" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>路由器中IP报文转发核心功能</p>
<ol>
<li>链路层解封装，IP头部校验</li>
<li>获取报文目的IP地址</li>
<li>用目的IP地址，基于最长前缀匹配规则查询转发表</li>
<li>查询失败，丢弃报文</li>
<li>查询成功<ol>
<li>获取转发出接口和下一跳IP地址</li>
<li>IP头部“TTL”字段值减1，重新计算IP头部“校验和”</li>
<li>重新进行链路层封装，发送报文</li>
</ol>
</li>
</ol>
<p>注：普通IP报文转发过程中，路由器不查看传输层及以上层协议的内容</p>
</li>
<li>
<p>IP报文在路由器转发前后的变化</p>
<ul>
<li><font color = "red">链路层封装更新，IP头部“TTL”减1，IP头部“校验和”更新</font></li>
</ul>
</li>
</ul>
<h3 id="54">5.4 路由器交换结构<a class="headerlink" href="#54" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../img/145.png" width="450" /></p>
<h2 id="6">6. 拥塞控制（重点在下一章中）<a class="headerlink" href="#6" title="Permanent link">&para;</a></h2>
<ul>
<li>拥塞：网络中存在太多的数据包导致数据包传输延迟或丢失，从而
导致网络吞吐量下降</li>
<li>拥塞控制（congestion control）：需要确保通信子网能够承载用户提交的通信量，是一个全局性问题，涉及主机、路由器等多种因素</li>
<li>产生拥塞的原因:<ol>
<li>主机发送到网络的数据包数量过多，超过了网络的承载能力</li>
<li>突发的流量填满了路由器的缓冲区，造成某些数据包会被丢弃</li>
</ol>
</li>
</ul>
<h2 id="7">7. 服务质量（应该不是重点）<a class="headerlink" href="#7" title="Permanent link">&para;</a></h2>
<h2 id="8-vpn">8. 三层交换与VPN<a class="headerlink" href="#8-vpn" title="Permanent link">&para;</a></h2>
<ul>
<li>VPN的原理：VPN指利用公用网络架设专用网络的远程访问技术；VPN通过隧道技术在公共网络上模拟出一条点到点的逻辑专线，从而达到安全数据传输的目的。</li>
</ul>
<p><img alt="" src="../img/146.png" width="450" /></p>
<h2 id="9ipv6">9.IPv6技术<a class="headerlink" href="#9ipv6" title="Permanent link">&para;</a></h2>
<ul>
<li>IPv6 地址<ul>
<li>地址长度为128bit，是IPv4地址长度的4倍</li>
<li>IPv6地址空间数量约为3*10^38</li>
<li>IPv6地址表示法，冒分十六进制<ol>
<li>简化方法：每个x前面的0可省略，可把连续的值为0的x表示为“::”,且“::”只能出现1次</li>
<li>简化前地址，2001:0DA8:0000:0000:200C:0000:0000:00A5</li>
<li>简化后地址，2001:<font color = "red">DA8</font>:0000:0000:200C<font color = "red">::A5</font></li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="91-ipv6">9.1 IPv6头部结构<a class="headerlink" href="#91-ipv6" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../img/147.png" />  </p>
<ul>
<li>版本：4bit，协议版本号，值为6</li>
<li>流量类型：8bit，区分数据包的服务类别或优先级</li>
<li>流标签：20bit，标识同一个数据流</li>
<li>有效载荷长度：16bit，IPv6报头之后载荷的字节数（含扩展头），最大值64K</li>
<li>下一个首部：8bit ，IPv6报头后的协议类型，可能是TCP/UDP/ICMP等，也可能是扩展头</li>
<li>跳数限制：8bit ，类似IPv4的TTL，每次转发跳数减1，值为0时包将会被丢弃</li>
<li>源地址：128bit ，标识该报文的源地址</li>
<li>目的地址：128bit ，标识该报文的目的地址</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">IPv6头部字段分析</p>
<ul>
<li>IPv6头部长度固定40字节，所有“选项”字段都在IPv6扩展头部分</li>
<li>与IPv4头部的比较<ol>
<li>去除“首部长度”（首部长度固定为40字节）</li>
<li>去除“首部校验和”（传输层校验会涉及伪头部信息），提升转发速度</li>
<li>去除分片字段：“标识”“标志”“片偏移”，移至扩展头（分段头）</li>
</ol>
</li>
<li>IPv6分片机制<ol>
<li>IPv6分组不能在传输途中分片，只在源端进行分片</li>
<li>IPv6设计了专门的分片扩展头，分片字段不存在基本IPv6头部中</li>
<li>IPv6支持Path MTU发现机制</li>
</ol>
</li>
</ul>
</div>
<h3 id="92-ipv6">9.2 IPv6扩展头<a class="headerlink" href="#92-ipv6" title="Permanent link">&para;</a></h3>
<p>IPv6报文可承载多个扩展头</p>
<ul>
<li>每个扩展头都包含“下一个首部”字段（IPv6首部固定字段也有）<ol>
<li>可指向下一个扩展头类型</li>
<li>或指明传统上层协议类型（最后一个扩展头）：TCP/UDP/ICMP…… </li>
</ol>
</li>
</ul>
<h3 id="93-ipv6">9.3 IPv6地址配置<a class="headerlink" href="#93-ipv6" title="Permanent link">&para;</a></h3>
<ul>
<li>IPv6地址分类<ol>
<li>未指定地址（::/128），不能分配给任何节点</li>
<li>回环地址（::1/128），表示节点自己，不分配，类似IPv4中的127.0.0.1</li>
<li>组播地址（FF00::/8）</li>
<li>链路本地地址（FE80::/10），也称为Link-local地址，仅在本地链路上使用，网络设备根据接口MAC地址自动生成</li>
<li>全局单播地址，其它地址</li>
</ol>
</li>
</ul>
<h3 id="94-ipv4ipv6">9.4 IPv4/IPv6过渡技术<a class="headerlink" href="#94-ipv4ipv6" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>IPv4/IPv6过渡技术的关键要素</p>
<ol>
<li>尽量保证端到端透明原则</li>
<li>高效、可行的编址及地址规划</li>
<li>路由可扩展性，避免路由表膨胀（消耗转发资源）</li>
<li>状态维护，减少因为过渡机制引起的状态维护，如IPv4-IPv6映射关系</li>
</ol>
</li>
<li>
<p>隧道技术：  <br />
<img alt="" src="../img/148.png" /></p>
</li>
</ul>







  
  






  <h2 id="__comments">Comments</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
  data-repo="sqc-cyh/MyWeb-discussion"
  data-repo-id="R_kgDOLX74Ng"
  data-category="General"
  data-category-id="DIC_kwDOLX74Ns4Cdg_o"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="light"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async>
</script>
  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/sqc-cyh" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<1076219827@qq.com>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "navigation.indexes", "search.share", "content.code.annotate", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../../javascripts/extra.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../javascripts/katex.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>