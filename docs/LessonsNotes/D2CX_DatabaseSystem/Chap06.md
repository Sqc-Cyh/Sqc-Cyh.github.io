---

title: Chap 6 | Relational Database Design

hide:
  #  - navigation # æ˜¾ç¤ºå³
  #  - toc #æ˜¾ç¤ºå·¦
  #  - footer
  #  - feedback  
comments: true  #é»˜è®¤ä¸å¼€å¯è¯„è®º

---
<h1 id="æ¬¢è¿">Chap 6 | Relational Database Design</h1>
!!! note "ç« èŠ‚å¯ç¤ºå½•"
    æœ¬ç« èŠ‚è®²äº†ä¸€äº› ~~å¥‡å¥‡æ€ªæ€ª~~ çš„ä¸œè¥¿ã€‚å…³é”®åº”è¯¥æ˜¯å‡½æ•°çš„ä¾èµ–å…³ç³»åŠå…¶ä¿æŒï¼Œè¿˜æœ‰é—­åŒ…çš„æ¦‚å¿µï¼Œåç»­æ˜¯ä¸¤ä¸ªèŒƒå¼ã€‚ä¸Šè¯¾æœ‰ç‚¹æ²¡å¬æ‡‚ï¼Œå¸Œæœ›æ•´ç†çš„æ—¶å€™å¯ä»¥ææ‡‚å§ã€‚

## 1.First Normal Form 
* å¦‚æœ R çš„æ‰€æœ‰å±æ€§åŸŸéƒ½æ˜¯åŸå­çš„ï¼Œé‚£ä¹ˆå…³ç³»æ¨¡å¼ R ç¬¦åˆç¬¬ä¸€èŒƒå¼ ï¼ˆ1NFï¼‰ã€‚  
å¯¹äºå…³ç³»æ•°æ®åº“ï¼Œè¦æ±‚æ‰€æœ‰å…³ç³»éƒ½ä½äº 1NF ä¸­ã€‚

## 2.Pitfalls in Relational Database Design ï¼ˆå…³ç³»æ•°æ®åº“è®¾è®¡ä¸­çš„é™·é˜±ï¼‰

* Redundancy (å†—ä½™)ï¼š  
>åˆ†æ”¯æœºæ„åç§°ã€åˆ†æ”¯åŸå¸‚å’Œèµ„äº§çš„æ•°æ®å°†é’ˆå¯¹åˆ†æ”¯æœºæ„æä¾›çš„æ¯ç¬”è´·æ¬¾é‡å¤è¿›è¡Œã€‚  

é—®é¢˜ï¼šæµªè´¹ç©ºé—´ï¼Œå¯èƒ½å¯¼è‡´ä¸ä¸€è‡´ã€‚

* Updating anomaly (æ›´æ–°å¼‚å¸¸)ï¼š
>ä¿®æ”¹èµ„äº§å€¼ï¼Œéœ€è¦æ›´æ”¹è®¸å¤šå…ƒç»„ã€‚

é—®é¢˜ï¼šä½¿æ›´æ–°å¤æ‚åŒ–ï¼Œå¼•å…¥ä¸ä¸€è‡´çš„å¯èƒ½æ€§ã€‚

* Insert/delete anomalies (æ’å…¥/åˆ é™¤å¼‚å¸¸)ã€‚
å¦‚æœæœ‰å¯†é’¥ï¼šï¼ˆåˆ†æ”¯åç§°ã€å®¢æˆ·åç§°ã€è´·æ¬¾å·ç ï¼‰  
æˆ–è€…ä½¿ç”¨ Null å€¼ï¼šï¼ˆå¦‚æœæ²¡æœ‰é”®ï¼‰
è¦å­˜å‚¨æœ‰å…³åˆ†æ”¯çš„ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰è´·æ¬¾å­˜åœ¨ï¼Œå¯ä»¥ä½¿ç”¨ç©ºå€¼ï¼Œä½†å®ƒä»¬å¾ˆéš¾å¤„ç†ã€‚


å‰æƒ…æè¦å®Œæ¯•ï¼Œä¸‹é¢å°†è¿›å…¥æœ¬ç« èŠ‚çš„æ­£é¢˜ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æˆ‘ä»¬çš„ç›®æ ‡ã€‚
!!! abstract "ç›®æ ‡"
    * ç¡®å®šç‰¹å®šå…³ç³» R æ˜¯å¦ä¸ºâ€œè‰¯å¥½â€å½¢å¼ã€‚--- æ— å†—ä½™    
    * å¦‚æœå…³ç³» R ä¸æ˜¯â€œå¥½â€å½¢å¼ï¼Œè¯·å°†å…¶åˆ†è§£ä¸ºä¸€ç»„å…³ç³» {R1ï¼Œ R2ï¼Œ ...ï¼Œ Rn}ï¼Œä½¿å¾—
    æ¯ä¸ªå…³ç³»éƒ½å¤„äºè‰¯å¥½çš„çŠ¶æ€ã€‚
    * è¿™ä¸ªåˆ†è§£è¢«ç§°ä¸ºæ— æŸè¿æ¥åˆ†è§£ã€‚

    * æˆ‘ä»¬çš„ç†è®ºåŸºäºï¼š
    **Functional** **dependencies** ï¼ˆå‡½æ•°ä¾èµ–ï¼‰
    **Multivalue** **dependencies** ï¼ˆå¤šå€¼ä¾èµ–ï¼‰

## 3.Functional Dependencies ï¼ˆå‡½æ•°ä¾èµ–ï¼‰

* å®šä¹‰ï¼šæ•°æ®åº“ä¸­å‡½æ•°çš„ä¾èµ–å…³ç³»ä¸æ•°å­¦ä¸­çš„å‡½æ•°å¾ˆç›¸è¿‘ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œç±»æ¯”ï¼šæ•°å­¦ä¸­ $x$ èƒ½å¤Ÿå†³å®š $f(x)$ æˆ–è€…è¯´ $y$ ï¼Œè€Œåœ¨æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹çš„è¯´æ³•ï¼š  
$y$ ä¾èµ–äº $x$ , $x$ å†³å®š $y$

>e.g:  
Consider r(A, B) with the following instance of r.   
![](./img/84.png)  
åœ¨è¿™é‡Œï¼Œå› ä¸ºè‹¥Bå±æ€§å€¼ç¡®å®šäº†ï¼Œåˆ™Aå±æ€§å€¼ä¹Ÿå”¯ä¸€ç¡®å®šäº†ï¼›å› æ­¤B â†’ Aæˆç«‹ã€‚

\#\#ä¸‹é¢æ˜¯å‡ ä¸ªå‰ç½®å®šä¹‰ã€‚ 

* å¹³å‡¡çš„å‡½æ•°ä¾èµ–ï¼š$Î± \rightarrow Î² ,if\;\; Î²\subsetÎ±$
* éå¹³å‡¡çš„å‡½æ•°ä¾èµ–ï¼š$Î± \rightarrow Î² ,if\;\; Î²\not\subsetÎ±$
* å‡½æ•°ä¾èµ–çš„é—­åŒ…ï¼šç»™å®šä¸€ç»„åŠŸèƒ½ä¾èµ–å…³ç³» $F$ï¼Œåˆ™ F åœ¨é€»è¾‘ä¸Šéšå«æŸäº›å…¶ä»–åŠŸèƒ½ä¾èµ–å…³ç³»ã€‚$F$ é€»è¾‘ä¸Šéšå«çš„æ‰€æœ‰åŠŸèƒ½ä¾èµ–å…³ç³»çš„é›†åˆç§°ä¸º $F$ çš„é—­åŒ…ï¼Œç”¨ $F^+$ è¡¨ç¤ºã€‚
>e.g:  
![](./img/86.png)
* å±æ€§çš„é—­åŒ…ï¼šç»™å®šä¸€ç»„å±æ€§ $a$ï¼Œåœ¨ $F$ ä¸‹ç”± $a$ æ‰€ç›´æ¥å’Œé—´æ¥å‡½æ•°å†³å®šçš„å±æ€§çš„é›†åˆç§°ä¸º $a$ çš„é—­åŒ…ï¼Œç”¨ $a^+$ è¡¨ç¤ºã€‚

### 3.1 å‡½æ•°ä¾èµ–çš„ç”¨é€”
* 1.æµ‹è¯•å…³ç³»ï¼Œçœ‹çœ‹å®ƒä»¬åœ¨ä¸€ç»„ç»™å®šçš„åŠŸèƒ½ä¾èµ–å…³ç³» F ä¸‹æ˜¯å¦åˆæ³•ã€‚
>å¦‚æœå…³ç³» r åœ¨å‡½æ•°ä¾èµ–å…³ç³»çš„é›†åˆ F ä¸‹æ˜¯åˆæ³•çš„ï¼Œæˆ‘ä»¬è¯´ r æ»¡è¶³ Fã€‚
![](./img/85.png)  
$AB \rightarrow D$ æ„å‘³ç€ $\{A,B\} \rightarrow D$
* 2.æŒ‡å®šschemaä¸Šçš„åˆæ³•å…³ç³»é›†çš„çº¦æŸã€‚
>å¦‚æœ R ä¸Šçš„æ‰€æœ‰æ³•å¾‹å…³ç³» r éƒ½æ»¡è¶³å‡½æ•°ä¾èµ–å…³ç³» F çš„é›†åˆï¼Œåˆ™ F åœ¨ R ä¸Šæˆç«‹ã€‚
!!! warning "æ³¨æ„ï¼š"
    * å®¹æ˜“åˆ¤åˆ«ä¸€ä¸ªræ˜¯å¦æ»¡è¶³ç»™å®šçš„F;
    * ä¸æ˜“åˆ¤åˆ«Fæ˜¯å¦åœ¨Rä¸Šæˆç«‹ã€‚ä¸èƒ½ä»…ç”±æŸä¸ªræ¨æ–­å‡ºFã€‚
    Rä¸Šçš„å‡½æ•°ä¾èµ–F, é€šå¸¸ç”±å®šä¹‰Rçš„è¯­ä¹‰å†³å®šã€‚ 



### 3.2 Armstrongâ€™s Axioms ï¼ˆç™»æœˆå®šç†â€”â€”~~æˆ‘çèµ·çš„åå­—~~ï¼‰
å› ä¸ºArmstrongè¯»èµ·æ¥çœŸçš„å¾ˆåƒé˜¿å§†æ–¯ç‰¹æœ—ï¼ˆbushiï¼‰

* reflexivity ï¼ˆè‡ªåå¾‹ï¼‰ï¼š$if\;\; Î²\subset Î±ï¼Œthen\;\;a \rightarrow Î²$
* augmentation ï¼ˆå¢è¡¥å¾‹ï¼‰: $if\;\; Î±\rightarrow Î²,then\;\;Î³Î±\rightarrow Î³Î²$,åŒæ—¶æœ‰ $Î³Î±\rightarrow Î²$
* transitivity ï¼ˆä¼ é€’å¾‹ï¼‰: $if\;\;Î±\rightarrow Î²,and\;\;Î²\rightarrow Î³,then\;\; Î±\rightarrow Î³$

ä¸‹é¢æ˜¯ç™»æœˆå®šç†çš„è¡¥å……å®šç†ï¼Œæˆ‘ä¹ŸæŠŠå®ƒä»¬ä¸€èµ·æ”¾åœ¨ç™»æœˆå®šç†çš„éƒ¨åˆ†ä¸­äº†ã€‚

* union ï¼ˆåˆå¹¶å¾‹ï¼‰: $if\;\; Î±\rightarrow Î²\;\;and\;\;Î±\rightarrow Î³,then\;\;Î±\rightarrow Î²Î³$
* decomposition ï¼ˆåˆ†è§£å¾‹ï¼‰: $if\;\;Î±\rightarrow Î²Î³,then\;\;Î±\rightarrow Î²\;\;and\;\;Î±\rightarrow Î³$ ï¼ˆå…¶å®æˆ‘æ›´å–œæ¬¢ç§°å®ƒä¸ºåˆ†é…å¾‹ï¼‰ã€‚
* pseudotransitivity ï¼ˆä¼ªä¼ é€’å¾‹ï¼‰: $if\;\;Î±\rightarrow Î²\;\;and\;\;Î³Î²\rightarrow\delta,then\;\;Î±Î³\rightarrow\delta$

>åˆ†é…å¾‹çš„è¯æ˜å¦‚ä¸‹ï¼š  
![](./img/87.png)

!!! question "ä¸€ä¸ªé—®é¢˜ï¼šHow to test whether a is a superkey? "
    * æ–¹æ³•ä¸€ï¼šå…ˆæ‰¾ $F^+$ï¼Œç„¶åå¯¹ $F^+$ ä¸­çš„æ‰€æœ‰ $a \rightarrow Î²_i$ï¼Œçœ‹ $\{Î²_1ï¼Œ Î²_2ï¼Œ Î²_3ï¼Œ ...\} = R$ æ˜¯å¦æˆç«‹ã€‚ä½†æ˜¯è®¡ç®— $F^+$ å¹¶ä¸å®¹æ˜“ã€‚
    * æ–¹æ³•2ï¼šæ‰¾åˆ° $a$ çš„é—­åŒ…ã€‚
    
    ç”±äºæ–¹æ³•ä¸€ä¸­éœ€è¦å¯»æ‰¾ $F^+$ ï¼Œä¸”æ¯”è¾ƒéº»çƒ¦ï¼Œäºæ˜¯å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œå¦‚ä½•æ‰¾åˆ° $a$ çš„é—­åŒ… $a^+$ ã€‚

!!! question "How to get $a^+$ ?"
    ```
    Algorithm for computing a+, the closure of a under F 
        result := a; 
        while (changes to result) do 
            for each Î² â†’ Î± in F do 
                begin 
                    If Î² å±äº result then result := result å¹¶ Î³ 
                end; 
            a+ := result 
    ```
    ä¸”çœ‹ä¸€ä¸ªä¾‹å­æ¥ç†è§£ä¸€ä¸‹:
    >e.g:  
    ![](./img/88.png)

### 3.3 å±æ€§é—­åŒ…çš„ç”¨é€”
* Testing for a superkeyï¼ˆæµ‹è¯•è¶…ç ï¼‰ï¼š$Î± \rightarrow R\;\;?$  
ä¸ºäº†æµ‹è¯• $Î±$ æ˜¯å¦æ˜¯è¶…ç ï¼Œæˆ‘ä»¬è®¡ç®— $a^+$ï¼Œç„¶åæ£€æŸ¥ $a^+$ æ˜¯å¦åŒ…å« R çš„æ‰€æœ‰å±æ€§ï¼Œå³æ£€æŸ¥ $R \subset a^+$

* Testing functional dependenciesï¼ˆæµ‹è¯•åŠŸèƒ½ä¾èµ–å…³ç³»ï¼‰ï¼š $Î± \rightarrow Î²\;\;?$
è¦æ£€æŸ¥åŠŸèƒ½ä¾èµ–å…³ç³» $Î± \rightarrow Î²$ æ˜¯å¦æˆç«‹ï¼ˆæˆ–è€…æ¢å¥è¯è¯´ï¼Œåœ¨ $F^+$ ä¸­ï¼‰ï¼Œä»…æ£€æŸ¥ $Î² \subset a^+$ ã€‚  
è¿™æ˜¯ä¸€ä¸ªç®€å•è€Œä¾¿å®œçš„æµ‹è¯•ï¼Œéå¸¸æœ‰ç”¨ã€‚

* Computing the closure of F ï¼ˆè®¡ç®— $F$ çš„é—­åŒ…ï¼‰ï¼š$F^+ = ?$
å¯¹äºæ¯ä¸ª $Î³ \subset R$ï¼Œæˆ‘ä»¬æ‰¾åˆ°é—­åŒ… $Î³^+$ï¼Œå¯¹äºæ¯ä¸ª $S \subset Î³+$ï¼Œæˆ‘ä»¬è¾“å‡ºä¸€ä¸ªåŠŸèƒ½ä¾èµ–å…³ç³» $Î³ \rightarrow S$ï¼Œæ‰€æœ‰ $Î³ \rightarrow S$ å½¢æˆ F+ã€‚

### 3.4 æ­£åˆ™è¦†ç›–
æ­£åˆ™è¦†ç›– $F_c$ æ˜¯å‡½æ•°ä¾èµ–é›† $F$ çš„æœ€å°åŒ–ã€‚å¾—åˆ° $F_c$ çš„å…³é”®æ­¥éª¤æ˜¯æ¶ˆå»ç°æœ‰å‡½æ•°ä¾èµ–ä¸­çš„extraneousï¼ˆæ— å…³çš„ã€å¤šä½™çš„ï¼‰å±æ€§ï¼Œä»è€Œæ’é™¤ç›¸åº”çš„å‡½æ•°ä¾èµ–ï¼Œä½¿å‡½æ•°ä¾èµ–é›†æœ€å°åŒ–ã€‚ 

* è¦æ¶ˆå»ç°æœ‰å‡½æ•°ä¾èµ–ï¡ â†’ ï¢ä¸­çš„extraneousï¼ˆæ— å…³çš„ã€å¤šä½™çš„ï¼‰å±æ€§ï¼Œæ— éæœ‰2ç§æƒ…å†µï¼š   

![](./img/89.png)  
![](./img/90.png)

* å¯¹äºæƒ…å†µ(1), $AÎ±^{\prime} \rightarrow Î²$ : å¦‚æœ $Î±^{\prime} \rightarrow Î²$ å·²ç»ç”±åŸæ¥çš„å‡½æ•°ä¾èµ–é›† $F$ æ‰€è•´æ¶µï¼ˆå³ $F$ ä¸­å·²ç»åŒ…å«äº† $Î±^{\prime} \rightarrow Î²$ï¼Œæˆ–Få¯ä»¥æ¨å‡º$Î±^{\prime} \rightarrow Î²$ ï¼‰ï¼Œåˆ™æ ¹æ®Armstrongå…¬ç†ï¼Œ $Î±^{\prime} \rightarrow Î²$ å¯ä»¥æ¨å‡º $AÎ±^{\prime} \rightarrow Î²$ ï¼Œå› æ­¤ $AÎ±^{\prime} \rightarrow Î²$ æ˜¯å¤šä½™çš„ (replace $AÎ±^{\prime} \rightarrow Î² with Î±^{\prime} \rightarrow Î²$ )ï¼Œä¹Ÿå³Aæ˜¯å¤šä½™çš„å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœFè•´æ¶µFï‚¢ï¼Œåˆ™å·¦å±æ€§Aå¯åˆ é™¤ï¼Œåªè¦ä¿ç•™å‰©ä½™éƒ¨åˆ†å°±å¯ä»¥äº†ã€‚
* å¯¹äºæƒ…å†µï¼ˆ2ï¼‰ï¼Œ$Î± \rightarrow AÎ²^{\prime}$ ï¼Œç­‰ä»·äº${Î± \rightarrow Î²^{\prime}, Î± \rightarrow A}$ï¼Œå¦‚æœ $Î± \rightarrow A$ å¯ä»¥ç”±å…¶ä½™çš„å‡½æ•°ä¾èµ–æ‰€è•´æ¶µï¼Œåˆ™è¯´æ˜ $Î± \rightarrow A$ å¤šä½™ï¼Œå³ $Î± \rightarrow AÎ²^{\prime}$ ä¸­çš„ $A$ å¤šä½™ï¼Œåªè¦ä¿ç•™ $Î± \rightarrow Î²^{\prime}$ å°±å¯ä»¥äº†ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ $F$ ä¸­å»æ‰ $Î± \rightarrow A$ ä¹‹åä½™ä¸‹çš„éƒ¨åˆ†å« $F^{\prime}$ , å³ $F^{\prime} = ((F â€“ \{Î± \rightarrow Î²\}) \cup \{Î± \rightarrow(Î² â€“ A)\})$ï¼Œåˆ™å¦‚æœ $F^{\prime}$ å¯ä»¥æ¨å‡º $Î± \rightarrow A$ ï¼Œè¿™è¯´æ˜ $Î± \rightarrow A$ å¤šä½™ï¼Œåªè¦ä¿ç•™ $F^{\prime}$ å°±å¯ä»¥äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ $F^{\prime}$ è•´æ¶µ $F$ ï¼Œåˆ™å³å±æ€§ $A$ å¯åˆ é™¤ã€‚

>e.g:  
![](./img/91.png)

## 4.Decomposition
æ— æŸè¿æ¥åˆ†è§£çš„æ¡ä»¶ï¼š åˆ†è§£åçš„äºŒä¸ªå­æ¨¡å¼çš„å…±åŒå±æ€§å¿…é¡»æ˜¯R1æˆ–R2çš„ç ï¼ˆé€‚ç”¨äºä¸€åˆ†ä¸ºäºŒçš„åˆ†è§£ï¼‰ã€‚ 

* åˆ†è§£æ—¶è¦æ³¨æ„çš„é—®é¢˜æ˜¯ä¾èµ–çš„ä¿æŒã€‚

>e.g:  
![](./img/92.png)


* åˆ†è§£ç»“æœçš„æµ‹è¯•ï¼š  
![](./img/93.png)

## 5.Boyce-Codd Normal Formï¼ˆBCèŒƒå¼ï¼‰
* å®šä¹‰: è‹¥å…³ç³»æ¨¡å¼ $R$ å±äº BCNF ä¸­ï¼Œç›¸å¯¹äºåŠŸèƒ½ä¾èµ–å…³ç³»çš„é›†åˆ $F$ï¼Œå¦‚æœå¯¹äº $F^+$ ä¸­ $Î±\rightarrow Î²$ å½¢å¼çš„æ‰€æœ‰åŠŸèƒ½ä¾èµ–å…³ç³»ï¼Œå…¶ä¸­ $a\subset R$ and $Î²\subset R$ï¼Œè‡³å°‘æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼š
![](./img/94.png)

>e.g:  
![](./img/95.png)

!!! abstract "æ€§è´¨"
    ä»»æ„ä¸€ä¸ªåªæœ‰ä¸¤ä¸ªå±æ€§å€¼çš„å…³ç³»ä¸€å®šæ»¡è¶³BCèŒƒå¼ã€‚

* æµ‹è¯•BCNF: æ£€æŸ¥éå¹³å‡¡ä¾èµ–é¡¹ $Î±\rightarrow Î²$ æ˜¯å¦å¯¼è‡´ BCNF å†²çªã€‚
    * è®¡ç®— $a^+$ ï¼ŒéªŒè¯ $a^+$ æ˜¯å¦åŒ…å« R çš„æ‰€æœ‰å±æ€§ï¼Œå³ $a$ æ˜¯å¦ä¸º R çš„è¶…é”®ã€‚
    * **ç®€åŒ–æµ‹è¯•**ï¼šè¦æ£€æŸ¥å…³ç³»æ¨¡å¼ $R$ æ˜¯å¦åœ¨ BCNF ä¸­ï¼Œåªéœ€æ£€æŸ¥ç»™å®šé›†åˆ $F$ ä¸­çš„ä¾èµ–é¡¹æ˜¯å¦è¿å BCNF å°±è¶³å¤Ÿäº†ï¼Œè€Œä¸æ˜¯æ£€æŸ¥ $F^+$ ä¸­çš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚
    å¦‚æœ $F$ ä¸­çš„ä»»ä½•ä¾èµ–é¡¹éƒ½ä¸ä¼šå¯¼è‡´ BCNF çš„å†²çªï¼Œé‚£ä¹ˆ $F^+$ ä¸­çš„ä»»ä½•ä¾èµ–é¡¹ä¹Ÿä¸ä¼šå¯¼è‡´ BCNF çš„å†²çªã€‚
    ![](./img/96.png)
    !!! warning "æ³¨æ„"
        ä½†æ˜¯ï¼Œåœ¨ $R$ åˆ†è§£ä¸­æµ‹è¯•å…³ç³» $R_i$ æ—¶ï¼Œä»…ä½¿ç”¨ $F$ æ¥æµ‹è¯• BCNF å¯èƒ½æ˜¯ä¸æ­£ç¡®çš„ã€‚å› æ­¤ï¼Œè™½ç„¶æˆ‘ä»¬å¯åœ¨ $F$ ä¸‹åˆ¤åˆ«Ræ˜¯å¦è¿åBCNF, ä½†å¿…é¡»åœ¨ $F^+$ ä¸‹åˆ¤åˆ«Rçš„åˆ†è§£å¼æ˜¯å¦è¿åBCNF. 
        >e.g:  
        ![](./img/97.png)  
        åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äºAèƒ½æ¨Cï¼Œè€ŒDä¸å…¶ä»–æ— å…³ï¼Œæ‰€ä»¥ä¸»é”®æ˜¯ADï¼ŒAä¸ç®—è¶…ç ã€‚

* BCNFçš„åˆ†è§£ç®—æ³•ï¼š      
    ```
    result := {R}; 
        done := false; 
        compute F+; 
        while (not done) do 
            if (there is a schema Ri in result that is not in BCNF) 
                then begin 
                    let Î± â†’ Î² be a nontrivial functional 
                    dependency that holds on Ri such 
                    that Î± â†’ Ri is not in F+, and Î± äº¤ Î² = ç©º; 
                    result := (result â€“ Ri) å¹¶ (Î±, Î²) å¹¶ (Ri â€“ Î²); 
                        end
                else done := true; 
    ```
    ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å…ˆåœ¨ $F$ ä¸­æ‰¾ä¸€ç»„å½¢å¦‚ $Î± â†’ Î²$ ä¸”ä¸æ»¡è¶³BCNFçš„å…³ç³»ï¼Œå– $R_1=(Î±,Î²)$,ç„¶åç”¨å‡æ³•å¾—åˆ° $R_2 = R - Î²$ï¼ˆè‹¥ $R_2$ ä»ä¸æ»¡è¶³ï¼Œåˆ™ç»§ç»­åˆ†è§£ï¼‰ï¼Œå¹¶ç”¨ $R_1,R_2$ æ›¿ä»£åŸæ¥çš„å…³ç³»ï¼Œæ¥ç€è€ƒè™‘ä¸‹ä¸€ç»„ä¸æ»¡è¶³å½¢å¦‚ $Î± â†’ Î²$ çš„å…³ç³»ï¼Œå– $R_3=(Î±,Î²)$ï¼Œç„¶åç”¨å‡æ³•å¾—åˆ° $R_4 = R_2 - Î²$ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰ $R_i$ éƒ½æ»¡è¶³BCNFã€‚
     
    !!! success "åˆ†è§£æ­¥éª¤" 
        â‘ ä»¤Ï=ï¼ˆRï¼‰ï¼›  
        â‘¡å¦‚æœÏä¸­æ‰€æœ‰æ¨¡å¼éƒ½æ˜¯BCNFï¼Œè‹¥æ˜¯è½¬â‘£,å¦åˆ™ç»§ç»­â‘¢ï¼›  
        â‘¢è‹¥å…¶ä¸­ä¸€ä¸ªå…³ç³»æ¨¡å¼Sä¸æ˜¯BCNF,åˆ™Sä¸­å¿…èƒ½æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°ä¾èµ–X->Aï¼ŒXä¸åŒ…å«Sçš„å€™é€‰ç ï¼Œä¸”Aä¸å±äºX,è®¾S1=XA,S2=S-A,ç”¨åˆ†è§£{S1,S2}ä»£æ›¿S,è½¬â‘¡ï¼›  
        â‘£åœæ­¢åˆ†è§£ï¼Œè¾“å‡ºÏï¼›  

    >e.g:  
    ![](./img/98.png)

* BCNFçš„ç¼ºé™·ï¼š å¹¶ä¸æ€»æ˜¯èƒ½å¤Ÿè·å¾—ä¿ç•™ä¾èµ–å…³ç³»çš„ BCNF åˆ†è§£ã€‚
    ![](./img/99.png)

## 6.Third Normal Formï¼ˆç¬¬ä¸‰èŒƒå¼ï¼‰
ç¬¬ä¸‰èŒƒå¼çš„ç›®çš„æ˜¯BCNFåšä¸€äº›æ”¾æ¾ï¼Œå³å…è®¸ä¸€å®šçš„å†—ä½™ã€‚

* å®šä¹‰ï¼šå¦‚æœ $F^+$ ä¸­çš„æ‰€æœ‰ $Î±\rightarrow Î²$ è‡³å°‘æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼Œåˆ™å…³ç³»æ¨¡å¼ R é‡‡ç”¨ç¬¬ä¸‰èŒƒå¼ ï¼ˆ3NFï¼‰ï¼š
    ![](./img/100.png)

!!! abstract "è®¨è®º"
    å›½å†…å…¶ä»–æ•™æå…³äº3NFçš„å®šä¹‰: ä¸å­˜åœ¨éä¸»å±æ€§å¯¹ç çš„éƒ¨åˆ†ä¾èµ–å’Œä¼ é€’ä¾èµ–. è¯¥å®šä¹‰å®é™…æ˜¯è¯´, å½“Î±ä¸ºéä¸»å±æ€§æ—¶, Î±å¿…é¡»æ˜¯ç ; ä½†å½“Î±ä¸ºä¸»å±æ€§æ—¶, åˆ™Î±æ— é™åˆ¶. å›½å†…å¤–è¿™äºŒç§å®šä¹‰æœ¬è´¨ä¸Šæ˜¯ä¸€è‡´çš„. 

>e.g:  
![](./img/101.png)

* å†—ä½™å¸¦æ¥çš„é—®é¢˜ï¼š  
    ![](./img/102.png)  
    åœ¨ 3NF ä¸­ä½†ä¸åœ¨ BCNF ä¸­çš„æ¨¡å¼å­˜åœ¨ä¿¡æ¯é‡å¤çš„é—®é¢˜ï¼ˆä¾‹å¦‚ï¼Œå…³ç³» l1ã€k1ï¼‰ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦ä½¿ç”¨ null å€¼ï¼ˆä¾‹å¦‚ï¼Œè¡¨ç¤ºå…³ç³» l2ã€k2ï¼Œå…¶ä¸­ J æ²¡æœ‰ç›¸åº”çš„å€¼ï¼‰ã€‚

* æµ‹è¯•3NF:  
    ä¼˜åŒ–ï¼šåªéœ€è¦æ£€æŸ¥ $F$ ä¸­çš„ $FD$ï¼Œä¸éœ€è¦æ£€æŸ¥ $F^+$ ä¸­çš„æ‰€æœ‰ $FD$ã€‚  
    ä½¿ç”¨å±æ€§é—­åŒ…æ£€æŸ¥æ¯ä¸ªä¾èµ–é¡¹ $Î±\rightarrow Î²$ï¼Œä»¥æŸ¥çœ‹ Î± æ˜¯å¦ä¸ºè¶…ç ã€‚  
    å¦‚æœ Î± ä¸æ˜¯è¶…ç ï¼Œæˆ‘ä»¬å¿…é¡»éªŒè¯ Î² ä¸­çš„æ¯ä¸ªå±æ€§æ˜¯å¦éƒ½åŒ…å«åœ¨ $R$ çš„å€™é€‰é”®ä¸­ã€‚  
    æ­¤æµ‹è¯•ç›¸å½“æ˜‚è´µï¼Œå› ä¸ºå®ƒæ¶‰åŠæŸ¥æ‰¾æ‰€æœ‰å€™é€‰å¯†é’¥ã€‚  
    3NF çš„æµ‹è¯•å·²è¢«è¯æ˜æ˜¯ NP å›°éš¾çš„ã€‚  
    æœ‰è¶£çš„æ˜¯ï¼Œåˆ†è§£ä¸ºç¬¬ä¸‰èŒƒå¼å½¢å¼ï¼ˆç¨åæè¿°ï¼‰å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…å®Œæˆã€‚
* 3NFåˆ†è§£ç®—æ³•ï¼š
    ```
    Let Fc be a canonical cover for F; 
    i := 0; 
    for each functional dependency ï¡ ï‚® ï¢ in Fc do 
        {if none of the schemas Rj, 1 â‰¤ j â‰¤ i contains Î± Î² 
            then begin 
                i := i  + 1; 
                Ri := (Î± Î²) 
            end} 
    if none of the schemas Rj, 1 â‰¤ j  â‰¤ i contains a candidate key for R then 
    begin 
        i := i  + 1; 
        Ri := any candidate key for R; 
    end 
    return (R1, R2, ..., Ri) 
    ```
    ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°† $F_c$ ä¸­çš„æ¯ä¸ª $Î±\rightarrow Î²$ åˆ†è§£ä¸ºå­æ¨¡å¼ $Ri := (Î±, Î²)$ , ä»è€Œä¿è¯ dependency-preserving.å¹¶ä¸”ä¿è¯è‡³å°‘åœ¨ä¸€ä¸ª $R_i$ ä¸­å­˜åœ¨ $R$ çš„å€™é€‰ç , ä»è€Œä¿è¯ lossless-joinã€‚

    >e.g:  
    ![](./img/103.png)

!!! question "BCNF vs. 3NF"
    * æ€»æ˜¯å¯ä»¥å°†å…³ç³»åˆ†è§£ä¸º 3NF ä¸­çš„å…³ç³»ï¼Œå¹¶ä¸”
        * åˆ†è§£æ˜¯æ— æŸçš„ã€‚
        * å°†ä¿ç•™ä¾èµ–é¡¹ã€‚

    * æ€»æ˜¯å¯ä»¥å°†å…³ç³»åˆ†è§£ä¸ºBCNFå…³ç³»ï¼Œå¹¶ä¸”
        * åˆ†è§£æ˜¯æ— æŸçš„ã€‚
        <font color='red'>
        * ä½†æ˜¯ï¼Œå¯èƒ½æ— æ³•ä¿ç•™ä¾èµ–é¡¹ã€‚
        </font>

!!! example "ä¸€äº›ä¾‹å­ğŸŒ°"
    === "Example1:æ­£åˆ™è¦†ç›–"
        ![](./img/104.png)
    === "Example2:BCNF"
        ![](./img/105.png)
    === "Example3:BCNF and 3NF"
        ![](./img/106.png)
    === "Example4:BCNF and 3NF"
        ![](./img/107.png)

## 7.Fourth Normal Form ï¼ˆç¬¬å››èŒƒå¼ï¼‰
ç¬¬å››èŒƒå¼å…¶å®å°±æ˜¯å¤šå€¼ä¾èµ–çš„ç¬¬äºŒèŒƒå¼ã€‚  

* å®šä¹‰: è‹¥å…³ç³»æ¨¡å¼ $R$ å±äº 4NF ä¸­ï¼Œç›¸å¯¹äºåŠŸèƒ½ä¾èµ–å…³ç³»çš„é›†åˆ $F$ï¼Œå¦‚æœå¯¹äº $F^+$ ä¸­ $Î±\rightarrow\rightarrow Î²$ å½¢å¼çš„æ‰€æœ‰åŠŸèƒ½ä¾èµ–å…³ç³»ï¼Œå…¶ä¸­ $a\subset R$ and $Î²\subset R$ï¼Œè‡³å°‘æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼š  
    ![](./img/108.png)

* If a relation is in 4NF, it is in BCNF. 

å…¶ä½™å†…å®¹ä¸ç¬¬äºŒèŒƒå¼ç±»ä¼¼ï¼Œåœ¨æ­¤ä¸åšè¿‡å¤šèµ˜è¿°ã€‚


!!! tip "å¤ä¹ æ—¶çš„ä¸€äº›è¡¥å……"
    * ![](./img/202.png)
    * Decide whether a particular relation R is in â€œgoodâ€ form. --- No redundant 
    * Functional dependencies allow us to express constraints that cannot be expressed using keys. 
    * å®¹æ˜“åˆ¤åˆ«ä¸€ä¸ªræ˜¯å¦æ»¡è¶³ç»™å®šçš„F;ä¸æ˜“åˆ¤åˆ«Fæ˜¯å¦åœ¨Rä¸Šæˆç«‹ã€‚ä¸èƒ½ä»…ç”±æŸä¸ªræ¨æ–­å‡ºFã€‚
    * The maximum number of possible Functional Dependencies (FDs) is $2^n X 2^n$, for n attributes
    * There are 3 kind uses of the attribute set closure algorithm: 
        1. Testing for a superkey --- 
        2. Testing functional dependencies --- 
        3. Computing the closure of F --- (F+ = ?) 
        
    * å¯åœ¨Fä¸‹åˆ¤åˆ«Ræ˜¯å¦è¿åBCNF, ä½†å¿…é¡»åœ¨F+ä¸‹åˆ¤åˆ«Rçš„åˆ†è§£å¼æ˜¯å¦è¿åBCNF. 
    * If a relation is in 4NF, it is in BCNF. 
    
    
    
    
    


        



 

    


    
    


